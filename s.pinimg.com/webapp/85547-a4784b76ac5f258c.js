"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[85547],{366284:function(e,t,r){r.d(t,{G6:function(){return o},i7:function(){return i},oi:function(){return n},u$:function(){return a},un:function(){return s},vU:function(){return l}});var n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),a=function(e){return e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER};function o(e){return a(e)===n.SAFARI}function i(e){return a(e)===n.CHROME}function l(e){return a(e)===n.FIREFOX}function s(e){return a(e)===n.EDGE}},722767:function(e,t,r){var n=r(76911),a=r(945790);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,d,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=u(f);if(t){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)});function f(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return c(s(e=p.call.apply(p,[this].concat(r))),"observer",null),c(s(e),"handleVisibilityChanged",function(t,r){e.props.onVisibilityChange(t,r)}),e}return r=[{key:"componentDidMount",value:function(){var e=a.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}},{key:"render",value:function(){return n.Children.only(this.props.children)}}],i(f.prototype,r),d&&i(f,d),Object.defineProperty(f,"prototype",{writable:!1}),f}(n.Component);t.Z=p},623568:function(e,t,r){r.d(t,{NK:function(){return m},P6:function(){return i},ZE:function(){return y},Zt:function(){return v},_J:function(){return u},_S:function(){return b},cL:function(){return p},jL:function(){return s},oN:function(){return o},rM:function(){return f},sV:function(){return c},sY:function(){return d}});var n=r(179888);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=5e3,i=5e3/n.gJ,l=["Uploaded by user"],s=function(e,t){return!!t&&!e},u=function(e){return!!e&&5!==e},c=function(e){return["email","messages","deep_linking"].includes(e)},d=function(e){return!!e&&"gif"===e},p=function(e){var t=e.embedSrc,r=e.embedSubtype,n=e.embedType;return!!t&&!d(n)&&"pinstory"!==r},f=function(e){var t=e.link,r=e.mobileLink,n=e.trackedLink;return!r&&!n&&!t},y=function(e){return/pin.it/gim.test(e||"")},v=function(e){var t=e.link,r=e.mobileLink,n=e.origImageUrl,a=e.trackedLink;return r||a||t||n||""},m=function(e,t){return{deeplinkUri:{android:"pin/".concat(e,"/repin"),iOS:"repin/".concat(e)},mwebUri:{pathname:"/pin/".concat(e,"/repin/"),state:{trackingParams:t.state?t.state.trackingParams:""}}}};function b(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw i}}}}(l);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e===n)return!1}}catch(e){r.e(e)}finally{r.f()}return!0}},562559:function(e,t,r){var n=r(76911),a=r(571827),o=r.n(a),i=r(908390),l=r(112690),s=r(773285),u=r(780280),c=r(19121),d=r(969315),p=r(179888),f=r(965900),y=r(515198),v=["clientTrackingParams","component","durationNs","element","objectId","pairId","viewData","view","viewParameter"];function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t){return t?e.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com"):e},T=function(e,t){return"string"==typeof e?E(e,t):Array.isArray(e)?e[0].src&&t?[S(S({},e[0]),{},{src:E(e[0].src,t)})]:e:e},D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(l,e);var t,r,n,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=g(l);if(t){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(h(e=a.call.apply(a,[this].concat(r))),"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:p.Cy.DEFAULT,videoStartTime:e.props.seekTime||0}),w(h(e),"errorRetryCount",1),w(h(e),"firstFragBuffered",!1),w(h(e),"hasPlaybackStarted",!1),w(h(e),"hasVideoSessionStarted",!1),w(h(e),"hasVideoSessionEnded",!1),w(h(e),"hls",null),w(h(e),"fragStartupTime",{}),w(h(e),"lastLevelSwitchKbps",null),w(h(e),"lastStallTime",null),w(h(e),"lastPauseTime",null),w(h(e),"logSessionStartOnNextPlay",!1),w(h(e),"playerId",""),w(h(e),"videoSessionId",""),w(h(e),"videoVisibleTime",null),w(h(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof e.props.src?E(e.props.src,e.props.quicExpGroup):E(e.props.src[0].src,e.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),w(h(e),"initializeHls",function(){e.destroyHls();var t=e.props,r=t.src,n=t.hlsConfig,a=t.quicExpGroup,i=new(o())(n),l=T(r,a);i.loadSource(l),e.videoPlayerRef&&i.attachMedia(e.videoPlayerRef.video),i.on(o().Events.FRAG_BUFFERED,e.handleHlsFragBuffered),i.on(o().Events.FRAG_CHANGED,e.handleHlsFragChanged),i.on(o().Events.FRAG_LOADING,e.handleHlsFragLoading),i.on(o().Events.FRAG_LOADED,e.handleHlsFragLoaded),i.on(o().Events.MANIFEST_PARSED,function(){e.setState({isManifestParsed:!0})}),i.on(o().Events.LEVEL_SWITCHED,e.handleHlsLevelSwitched),i.on(o().Events.ERROR,e.handleHlsError),e.hls=i}),w(h(e),"destroyHls",function(){var t=h(e).hls;t&&t.destroy()}),w(h(e),"addSegment",function(t){var r=e.playbackPerformance.segments,n=r&&r[r.length-1];if(e.hls&&r.length&&n&&n.uri!==t.url){e.updateWatchDurationForCurrentSegment();var a=e.videoPlayerRef&&e.videoPlayerRef.video,o=e.hls&&e.hls.levels||{},i="number"==typeof t.level?o[t.level]:{},l=e.fragStartupTime[t.url],s=-1;l&&l.startLoadTime&&l.endLoadTime&&(s=l.endLoadTime-l.startLoadTime);var u={indicatedKbps:i.bitrate/p.bR,duration:t.duration,level:t.level,lastStartPlayTime:e.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:e.hls&&e.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:t.sn,sourceWidth:i.width,sourceHeight:i.height,startupTimeMs:s,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:a&&a.clientWidth||-1,viewportHeight:a&&a.clientHeight||-1,watchedDurationMs:0};r.push(u)}}),w(h(e),"initializeSegments",function(t){var r=e.props.contextLogData,n=(void 0===r?{}:r).is_closeup_video,a=e.playbackPerformance.segments;if(!a.length){if(!e.hls||!e.videoPlayerRef||!e.videoPlayerRef.video||!t){(0,d.tE)("initializeSegmentsFailed",!0,void 0!==n&&n);return}if(!a.length&&"number"==typeof t.level){var o=e.videoPlayerRef&&e.videoPlayerRef.video,i=e.hls.levels,l="number"==typeof t.level?i[t.level]:{},s=e.fragStartupTime[t.url],u=-1;s&&s.startLoadTime&&s.endLoadTime&&(u=s.endLoadTime-s.startLoadTime),e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/p.bR;var c={indicatedKbps:l.bitrate/p.bR,duration:t.duration,level:t.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:e.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:null,serverAddress:"",sn:t.sn,sourceWidth:l.width,sourceHeight:l.height,startupTimeMs:u,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:o.clientWidth,viewportHeight:o.clientHeight,watchedDurationMs:0};a.push(c)}}}),w(h(e),"getCurrentVideoTime",function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*p.gJ:null}),w(h(e),"handleCanPlayVideo",function(t){var r=e.props,n=r.contextLogData,a=r.onReady,o=r.playing,i=(void 0===n?{}:n).is_closeup_video,l=void 0!==i&&i,s=e.state.canPlayVideo;(0,d.tE)("handleCanPlayVideo",!0,l,{firstCanPlayEvent:!s,playing:o}),e.playbackPerformance.hasFatalError=!1,s||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),a&&a(t)}),w(h(e),"handleEnded",function(t){var r=e.props,n=r.loop,a=r.onEnded,o=e.playbackPerformance.segments,i=o&&o[o.length-1];n&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.fragStartupTime={}):n||e.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:n}),e.setState({playbackState:p.Cy.ENDED}),a&&a(t)}),w(h(e),"handleHlsError",function(t,r){var n=e.props.contextLogData,a=(void 0===n?{}:n).is_closeup_video;if(e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat(r.details),r.fatal){e.playbackPerformance.hasFatalError=!0,e.playbackPerformance.errorName=r.type,e.playbackPerformance.errorReason=r.details,e.playbackPerformance.errorCode=r.response&&r.response.code?r.response.code:0;var i={errorName:r.type,errorReason:r.details,errorRetryCount:e.errorRetryCount,errorMessage:(null===(s=r.err)||void 0===s?void 0:null===(u=s.message)||void 0===u?void 0:u.slice(0,50))||"unknown",errorResponse:(null===(c=r.response)||void 0===c?void 0:null===(f=c.text)||void 0===f?void 0:f.slice(0,50))||"unknown",playbackState:e.state.playbackState};if((0,d.tE)("fatalError",!0,void 0!==a&&a,i),e.errorRetryCount>0)switch(e.errorRetryCount-=1,r.type){case o().ErrorTypes.NETWORK_ERROR:if(r.details===o().ErrorDetails.MANIFEST_LOAD_ERROR||r.details===o().ErrorDetails.MANIFEST_LOAD_TIMEOUT||r.details===o().ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var l,s,u,c,f,y,v,m=e.props,b=T(m.src,m.quicExpGroup);null===(v=e.hls)||void 0===v||v.loadSource(b)}else null===(y=e.hls)||void 0===y||y.startLoad();break;case o().ErrorTypes.MEDIA_ERROR:null===(l=e.hls)||void 0===l||l.recoverMediaError()}}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:p.Cy.FAILED})}),w(h(e),"handleHlsFragBuffered",function(t,r){e.firstFragBuffered||(e.initializeSegments(r.frag),e.firstFragBuffered=!0)}),w(h(e),"handleHlsFragChanged",function(t,r){e.addSegment(r.frag)}),w(h(e),"handleHlsFragLoading",function(t,r){var n,a=null===(n=r.frag)||void 0===n?void 0:n.url;a&&!e.fragStartupTime[a]&&(e.fragStartupTime[a]={startLoadTime:new Date})}),w(h(e),"handleHlsFragLoaded",function(t,r){r.frag&&r.frag.loaded&&(e.playbackPerformance.downloadedKiloBytes+=r.frag.loaded/p.Fm);var n,a=null===(n=r.frag)||void 0===n?void 0:n.url;a&&e.fragStartupTime[a]&&e.fragStartupTime[a].startLoadTime&&(e.fragStartupTime[a].endLoadTime=new Date)}),w(h(e),"handleHlsLevelSwitched",function(){e.hls&&e.hls.bandwidthEstimate&&(e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/p.bR)}),w(h(e),"handleLoadedMetadata",function(){e.setState({playbackState:p.Cy.LOADED_METADATA})}),w(h(e),"handleLoadStart",function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:p.Cy.LOAD_START})}),w(h(e),"handleLoadedData",function(){e.setState({playbackState:p.Cy.LOADED_DATA})}),w(h(e),"handlePlaying",function(){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:p.Cy.PLAYING}),e.props.clearSeekTime&&e.props.clearSeekTime()}),w(h(e),"handleUserPause",function(t){var r=e.props.onControlsPause;e.lastPauseTime=new Date,r&&r(t)}),w(h(e),"handleVideoPause",function(){e.state.playbackState===p.Cy.STALLING||e.state.playbackState===p.Cy.SEEKING||(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:p.Cy.PAUSED})}),w(h(e),"handleSeeking",function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&(r.lastStartPlayTime=null),e.state.playbackState!==p.Cy.ENDED&&e.setState({playbackState:p.Cy.SEEKING})}),w(h(e),"handleStalled",function(){null===e.lastStallTime&&e.state.playbackState!==p.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1),e.setState({playbackState:p.Cy.STALLING})}),w(h(e),"handleTimeUpdate",function(t){var r=e.props.onTimeChange;r&&r(t),e.state.playbackState===p.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())}),w(h(e),"resetPlaybackMetrics",function(){e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastLevelSwitchKbps=null,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=S(S({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.downloadedKiloBytes=0,e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]}),w(h(e),"setLastSegmentStartPlayTime",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&null===r.lastStartPlayTime&&(r.lastStartPlayTime=e.getCurrentVideoTime())}),w(h(e),"setLastSegmentPlaybackStartDate",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&null===r.playbackStartDate&&(r.playbackStartDate=Date.now())}),w(h(e),"setPlaybackStartTime",function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)}),w(h(e),"setVideoPlayerRef",function(t){var r=e.props.setVideoRef;if(t&&(r&&r(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var n=e.videoPlayerRef.video;n.addEventListener("loadedmetadata",e.handleLoadedMetadata),n.addEventListener("loadeddata",e.handleLoadedData),n.addEventListener("pause",e.handleVideoPause),n.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}}),w(h(e),"updateStallDuration",function(){null!==e.lastStallTime&&(e.playbackPerformance.totalStallDurationMs+=new Date-e.lastStallTime,e.lastStallTime=null)}),w(h(e),"updatePauseDuration",function(){if(null!==e.lastPauseTime){var t=h(e).lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}}),w(h(e),"updateWatchDurationForCurrentSegment",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1],n=r?r.lastStartPlayTime:null,a=e.getCurrentVideoTime();if(r&&null!==n&&"number"==typeof a&&"number"==typeof n){var o=a-n;o>0&&(r.watchedDurationMs+=o,r.lastStartPlayTime=null)}}),w(h(e),"logPlaybackPerformance",function(t,r){var n=e.props,a=n.contextLogData,o=void 0===a?{}:a,i=n.userId,l=n.isAutoPlay,s=n.logContextEvent,u=n.preload,c=o.is_closeup_video,f=void 0!==c&&c,y=e.playbackPerformance,m=y.canPlayTime,b=y.detailedErrors,h=y.downloadedKiloBytes,g=y.errorCode,P=y.errorName,w=y.errorReason,O=y.hasFatalError,k=y.playbackStartTimestamp,E=y.totalPauseDurationMs,T=y.totalStallDurationMs,D=y.segments,R=y.srcString,C=y.loadStartTime,j=y.numberOfStalls,_=y.numberOfSeeks,A=e.videoPlayerRef&&e.videoPlayerRef.video,I=t===p.DR,L=I&&!e.hasVideoSessionStarted,V=!I&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(e.hls&&A&&(L||V)){var x,M=-1;m&&C&&(M=m>C?m-C:0);var F=-1;m&&e.videoVisibleTime&&(F=m>e.videoVisibleTime?m-e.videoVisibleTime:0),I&&(e.videoSessionId=(0,p.Y7)(i),e.playerId=e.playerId||(0,p.EB)());var N={autoplaying:l,averageVideoKbps:-1,detailedErrors:b,downloadedKiloBytes:h,isCellular:!1,errorCode:g,errorName:P,errorReason:w,fatalError:O,nativeVideoDurationMs:A.duration*p.gJ||-1,numberOfStalls:j,numberOfSeeks:_,overallPausedDurationMs:E,overallBufferDurationMs:T,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:k||-1,segments:[],sessionMark:t,screenPixelScale:null!==(x=window)&&void 0!==x&&x.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:A.clientWidth,startupPlayerHeight:A.clientHeight,startupTimeMs:M,startupLatencyMs:F,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:A.videoWidth,startupVariantHeight:A.videoHeight,videoUrl:R,wasVideoPreloaded:"auto"===u};if(!I&&D.length){var H=e.hls.levels,W=D[0];e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var B=D.reduce(function(e,t){return t&&"number"==typeof t.level&&H&&H.length>0?e+(H[t.level]||{}).bitrate*(t.watchedDurationMs||0)/p.gJ:e},0),U=D.reduce(function(e,t){return e+(t.watchedDurationMs||0)},0),G=null,K=0,q=0;do K+=D[q].watchedDurationMs,G=G||D[q].level,q+=1;while(q<D.length&&D[q].level===G);N.startupVariantKbps=W.indicatedKbps,N.startupVariantWatchedDurationMs=K,N.startupVariantWidth=W.sourceWidth,N.startupVariantHeight=W.sourceHeight,N.startupPlayerWidth=W.viewportWidth,N.startupPlayerHeight=W.viewportHeight,N.overallWatchedDurationMs=U,U>0?(N.averageVideoKbps=B/(U/p.gJ),N.rebufferRate=e.playbackPerformance.totalStallDurationMs/U):0===U&&(N.averageVideoKbps=-1,N.rebufferRate=-1,N.errorName="invalid_watch_duration"),N.segments=D}else N.errorName="invalid_watch_duration";(0,d.ZP)(N,!0,f,S({playbackState:e.state.playbackState},r));var z=o.clientTrackingParams,Z=o.component,$=o.durationNs,Y=o.element,J=o.objectId,X=o.pairId,Q=o.viewData,ee=o.view,et=o.viewParameter;s({aux_data:S(S({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(o,v)),{},{is_closeup_video:f,playback_session_id:e.videoSessionId}),clientTrackingParams:z,component:Z,duration_ns:$,element:Y,event_data:{videoPerformanceData:N},event_type:3606,object_id_str:J,pair_id:X,view_data:Q,view_parameter:et,view_type:ee}),I?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,d.tE)(I?"sessionStart":"sessionEnd",!0,f,S({playbackState:e.state.playbackState},r))}}),e}return r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.contextLogData,r=e.playing,n=(void 0===t?{}:t).is_closeup_video,a=void 0!==n&&n;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,d.tE)("videoMounted",!0,a),r&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(p.DR,{initiator:"mount"}))}},{key:"componentDidUpdate",value:function(e){var t,r=this.props,n=r.loop,a=r.playing,o=r.src,i=r.visible,l=r.appInFocus,s=r.seekTime;s&&s!==e.seekTime&&this.setState({videoStartTime:s}),t=e.src,(k(t)!==k(o)||(Array.isArray(o)?t.length!==o.length||o.some(function(e,r){return!Array.isArray(t)||e.type!==t[r].type||e.src!==t[r].src}):o!==t))&&this.initializeHls(),e.appInFocus&&!l&&(this.logPlaybackPerformance(p.$f,{initiator:"update",loop:n}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"update",loop:n})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,a?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),a&&l&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e}),this.destroyHls()}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,r=e.backgroundColor,n=e.captions,a=e.controls,o=e.loop,l=e.loopOverride,s=e.objectFit,u=e.onDurationChange,c=e.onFullscreenChange,d=e.onLoadedChange,p=e.onControlsPlay,f=e.onPlayheadDown,v=e.onPlayheadUp,m=e.onSeek,b=e.onVolumeChange,h=e.playbackRate,g=e.playing,P=e.playsInline,S=e.poster,w=e.preload,O=e.quicExpGroup,k=e.src,E=e.volume,D=this.state,R=D.canPlayVideo,C=D.isManifestParsed,j=D.videoStartTime,_=T(k,O);return(0,y.jsx)(i.nk,{aspectRatio:t,backgroundColor:r,captions:n,controls:a,loop:void 0===l?o:l,objectFit:s,onDurationChange:u,onEnded:this.handleEnded,onFullscreenChange:c,onLoadStart:this.handleLoadStart,onLoadedChange:d,onControlsPause:this.handleUserPause,onControlsPlay:p,onPlaying:this.handlePlaying,onPlayheadDown:f,onPlayheadUp:v,onReady:this.handleCanPlayVideo,onSeek:m,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:b,onWaiting:this.handleStalled,playbackRate:h,onPlay:function(){},onPlayError:function(){},playing:C&&R&&g,playsInline:P,poster:S,preload:w,ref:this.setVideoPlayerRef,src:_,startTime:j,volume:E})}}],m(l.prototype,r),n&&m(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(n.PureComponent);t.Z=(0,n.memo)(function(e){var t=(0,u.B)(),r=t.country,n=t.isAuthenticated,a=t.isBot,o=t.isSocialBot,i=t.unauthId,p=t.userAgent,v=(0,l.Z)(),m=(0,c.Z)(),b=p.browserName,h=p.browserVersion,g=p.isMobile,P=e.contextLogData,w=void 0===P?{}:P,O=w.is_closeup_video,k=w.view,E=w.viewParameter,T=(0,s.F)().checkExperiment,R=null;n&&(R=T("web_video_quic").group.length?T("web_video_quic").group:null);var C=(0,f.I)().appUI,j=T("web_video_fail_to_start_fix").anyEnabled?C.appInFocus:e.appInFocus;return(0,d.r$)({browserName:b,browserVersion:h,country:r,isAuthenticated:n,isBot:a,is_closeup_video:void 0!==O&&O,isMobile:g,isSocialBot:o,view:k,viewParameter:E}),(0,y.jsx)(D,S(S({},e),{},{userId:m.id||i,appInFocus:j,quicExpGroup:R,logContextEvent:v}))})},994320:function(e,t,r){r.d(t,{W:function(){return c},r:function(){return u}});var n=r(76911),a=r(425288),o=r(515198);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=(0,a.Z)("VideoPlayer"),s=l.Provider,u=l.useHook;function c(e){var t,r=e.children,a=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],u=a[1],c=(0,n.useMemo)(function(){return{captionsEnabled:l,setCaptionsEnabled:u}},[l]);return(0,o.jsx)(s,{value:c,children:r})}},969315:function(e,t,r){r.d(t,{ZP:function(){return v},r$:function(){return f},tE:function(){return y}});var n=r(311560),a=r(179888),o=r(67347);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c=["isCellular","videoUrl","sessionMark"],d={},p="",f=function(e){var t=e.browserName,r=e.browserVersion,a=e.country,o=e.isAuthenticated,i=e.isBot,l=e.isMobile,s=e.isSocialBot,u=e.view,c=e.viewParameter;p=s&&"socialBot"||i&&"bot"||"nonbot";var f=(0,n.Z)(a);d={browserName:t,browserVersion:(null==r?void 0:r.split(".")[0])||"0",isAuthenticated:o,isMobile:l,region:f,view:void 0===u?"unknown":u,viewParameter:void 0===c?"unknown":c}};function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=u(u({},n),d),i="web.video.".concat(t?"hls":"nonHls",".").concat(p,".").concat(r?"closeup":"nonCloseup",".").concat(e);"nonbot"===p&&(0,o.nP)(i,{sampleRate:1,tags:a})}function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r?"closeup":"nonCloseup",s=t?"hls":"nonHls",f=e.sessionMark===a.DR?"sessionStart":"sessionEnd",y=u(u({},n),d);if("nonbot"===p&&(Object.entries(e).forEach(function(t){var r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],a=r[1],d="web.video.".concat(s,".").concat(p,".").concat(i,".").concat(f,".").concat(n),v=parseInt(a,10),m="number"==typeof v?v:-1;if(!c.includes(n)){if(n.includes("fatalError")&&!0===a){var b=e.errorCode,h=e.errorName,g=e.errorReason;(0,o.nP)(d,{sampleRate:1,tags:u({errorCode:b,errorName:h,errorReason:g},y)})}else if(n.includes("Width")||n.includes("Height")){var P=m<0?"negative":0===m?"zero":m<200?"xs":m<400?"s":m<600?"m":m<800?"l":m<1e3?"xl":m<1200?"xxl":"over1200";(0,o.nP)(d,{sampleRate:1,tags:u({dimensionBucket:P},y)})}else if("numberOfStalls"===n){var S=a;m>1e3?S="over1000":m>10?S="over10":m<0&&(S="negative"),(0,o.nP)(d,{sampleRate:1,tags:u({numberOfStalls:S},y)})}else"screenPixelScale"===n?(0,o.nP)(d,{sampleRate:1,tags:u({screenPixelScale:a||-1},y)}):m>=0?(0===m&&(0,o.nP)("".concat(d,".zero"),{sampleRate:1,tags:y}),(0,o.LY)(d,m,{sampleRate:1})):m<0&&(0,o.nP)("".concat(d,".negative"),{sampleRate:1,tags:y})}}),e.sessionMark!==a.DR)){var v=e.rebufferRate,m=e.screenPixelScale,b=e.startupLatencyMs,h=e.startupVariantWidth,g=e.startupPlayerWidth,P="web.video.".concat(s,".").concat(p,".").concat(i,".").concat(f);"number"==typeof h&&"number"==typeof g&&"number"==typeof m&&(0,o.nP)("".concat(P,".upscaled.").concat(1.5*h>m*g?"good":"bad"),{sampleRate:1,tags:y}),"number"==typeof b&&(0,o.nP)("".concat(P,".startupLatency.").concat(b<500?"good":"bad"),{sampleRate:1,tags:y}),"number"==typeof v&&(0,o.nP)("".concat(P,".rebufferRate.").concat(v<.01?"good":"bad"),{sampleRate:1,tags:y})}}},179888:function(e,t,r){r.d(t,{$f:function(){return o},Cy:function(){return u},DR:function(){return a},EB:function(){return p},Fm:function(){return s},Y7:function(){return d},bR:function(){return l},gJ:function(){return i},lG:function(){return c}});var n=r(353356),a=1,o=2,i=1e3,l=1e3,s=1e3,u=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),c=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function d(e){return e+"-"+(0,n.Z)()}function p(){return(0,n.Z)()}},121630:function(e,t,r){r.d(t,{Z:function(){return o},e:function(){return a}});var n=r(81226),a=function(e){if("undefined"==typeof window)return"";var t=0,r=document.querySelector('[data-test-id="header"]');switch(null!==r&&(t+=r.getBoundingClientRect().height),e){case"AuthHomefeed":var n=document.querySelector('[data-root-margin="more-ideas-tabs"]');null!==n&&(t+=n.getBoundingClientRect().height);break;case"SearchItem":var a=document.querySelector('[data-root-margin="search-improvements-bar"]');null!==a&&(t+=a.getBoundingClientRect().height);var o=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');null!==o&&(t+=o.getBoundingClientRect().height)}return"".concat(-1*t,"px 0px 0px 0px")},o=function(e){var t=e.videosDuration,r=e.vHLSV4VideoDuration,a=e.storyPinDataTotalVideoDuration;return(0,n.Z)(t||r||a||0)}},539766:function(e,t,r){r.d(t,{P:function(){return w},Z:function(){return k}});var n=r(76911),a=r(571827),o=r.n(a),i=r(908390),l=r(366284),s=r(898781),u=r(391254),c=r(780280),d=r(50286),p=r(515198);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){P(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var w="\n  video::cue {\n    color: white;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, 'ヒラギノ角ゴ Pro W3', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', Arial, sans-serif;\n    font-weight: 450;\n    font-size: 18px;\n  }\n",O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(s,e);var t,r,n,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=g(s);if(t){var n=g(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return P(h(e=a.call.apply(a,[this].concat(r))),"state",{videoStartTime:0}),P(h(e),"setVideoPlayerRef",function(t){var r=e.props,n=r.setVideoRef,a=r.handlePlay,o=r.autoplay;e.videoPlayerRef=t,t&&n&&n(t.video),e.videoPlayerRef&&e.videoPlayerRef.video&&a&&(void 0===o||o)&&e.videoPlayerRef.video.addEventListener("canplay",function(){a({userTriggeredPlay:!1})})}),P(h(e),"hls",null),P(h(e),"initializeHls",function(){e.destroyHls();var t=e.props.src,r=new(o());o().isSupported()&&!(0,l.G6)(e.props.requestContext.userAgent.browserName)&&(r.loadSource(t),e.videoPlayerRef&&r.attachMedia(e.videoPlayerRef.video)),e.hls=r}),P(h(e),"destroyHls",function(){var t=h(e).hls;t&&t.destroy()}),P(h(e),"onPlay",function(t){var r=t.event,n=e.props.handlePlay;r.stopPropagation(),n&&n({userTriggeredPlay:!0})}),P(h(e),"onPause",function(t){var r=t.event,n=e.props.handlePause;r.stopPropagation(),n&&n()}),P(h(e),"handleVolumeChange",function(t){var r=t.event,n=t.volume,a=e.props.onVolumeChange;r.stopPropagation(),a&&a({volume:n})}),P(h(e),"handleOnReady",function(t){e.props.onReady&&e.props.onReady(t)}),P(h(e),"handleEnded",function(){var t=e.props.onEnded;t&&t()}),P(h(e),"handlePlaying",function(){var t=e.props.clearSeekTime;t&&t()}),e}return r=[{key:"componentDidMount",value:function(){this.initializeHls()}},{key:"componentWillUnmount",value:function(){this.destroyHls()}},{key:"componentDidUpdate",value:function(e){var t,r,n=this,a=this.props,i=a.activeStreamItemIndex,l=a.playing,s=a.src,u=a.seekTime,c=a.captionsEnabled,d=a.isDesktop,p=a.isTablet,f=a.requestContext,y=a.isVideoPin,v=f.isAuthenticated;u&&u!==e.seekTime&&this.setState({videoStartTime:u});var m=null===(t=this.videoPlayerRef)||void 0===t?void 0:null===(r=t.video)||void 0===r?void 0:r.textTracks[0];m&&(c?m.mode="showing":m.mode="disabled",m.addEventListener("cuechange",function(){var e=m.activeCues&&m.activeCues.length>0&&m.activeCues[0];e&&e.line&&(d?(e.line=-6,e.size=88):(v?e.line=-8:(e.line=-10,p&&(e.line=-15)),e.size=70),y&&(e.line=-5))})),i!==e.activeStreamItemIndex&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=0),e.src!==s&&(this.initializeHls(),this.hls&&this.hls.on(o().Events.MANIFEST_PARSED,function(){void 0!==l&&l&&n.videoPlayerRef&&n.videoPlayerRef.play()}))}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,r=e.controls,n=e.loop,a=e.poster,o=e.src,l=e.onTimeChange,s=e.playing,c=e.volume,d=e.captions;return(0,p.jsxs)(i.xu,{width:"100%",children:[(0,p.jsx)(u.Z,{unsafeCSS:w}),(0,p.jsx)(i.nk,{autoplay:s,playsInline:!0,aspectRatio:t,captions:d,controls:r,loop:void 0!==n&&n,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onReady:this.handleOnReady,onEnded:this.handleEnded,onVolumeChange:this.handleVolumeChange,onTimeChange:l,onPlay:function(){},onPlaying:this.handlePlaying,onPlayError:function(){},playing:s,poster:a,ref:this.setVideoPlayerRef,src:o,startTime:this.state.videoStartTime||void 0,volume:c})]})}}],m(s.prototype,r),n&&m(s,n),Object.defineProperty(s,"prototype",{writable:!1}),s}(n.PureComponent);function k(e){var t=e.clearSeekTime,r=e.pinId,n=void 0===r?"":r,a=e.seekTime,o=(0,s.ZP)(),i=(0,c.B)(),l=(0,d.HG)(),u=(0,d.Wb)();return(0,p.jsx)(O,v(v({},e),{},{i18n:o,requestContext:i,isDesktop:l,isTablet:u,seekTime:a,clearSeekTime:function(){t&&t(n)}}))}},926749:function(e,t,r){r.d(t,{ZP:function(){return x}});var n=r(76911),a=r(664229),o=r.n(a),i=r(908390),l=r(407043),s=r(722767),u=r(121630),c=r(944546);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=["eventData","component","objectId","view","viewParameter"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var y=r(158103),v=r(515198);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=["height","width","windowHeight","windowWidth","viewability"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var D=[0,.25,.5,.75,.95,.97],R=[0,.5,.8,.99,1],C="-64px 0px 0px 0px",j={rootMargin:C,threshold:R},_={rootMargin:C,threshold:c.i},A=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function I(){return new Date().getTime()}function L(e){return!!e.volume&&e.volume>0}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(c,e);var t,r,a,l=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=O(c);if(t){var n=O(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return w(e)}(this,e)});function c(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,c),k(w(t=l.call(this,e)),"videoWrapperRef",(0,n.createRef)()),k(w(t),"handleWindowResize",function(){if(!t.fullscreen){var e=t.getDimensions(),r=t.currentInterval,n=r.height,a=r.width;e.height!==n||e.width!==a?t.startNewInterval(e):(t.currentInterval.windowHeight=e.windowHeight,t.currentInterval.windowWidth=e.windowWidth)}}),k(w(t),"handlePlayheadDown",function(e){var r=e.event,n=t.props.onPlayheadDown;t.setState({seeking:!0}),n&&n({event:r})}),k(w(t),"handlePlayheadUp",function(e){var r=e.event,n=t.props.onPlayheadUp;t.setState({seeking:!1}),n&&n({event:r})}),k(w(t),"handleLoop",function(){t.videoTime=0}),k(w(t),"handleTimeChange",function(e){var r=t.state,n=r.seeking,a=r.ready;if(t.currentInterval.videoDuration){var o=1e3*e.time,i=function(e,t,r,n){if(e>t||r<=0)return null;var a,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(n);try{for(o.s();!(a=o.n()).done;){var i=a.value,l=i*r;if(e<=l&&t>l)return i}}catch(e){o.e(e)}finally{o.f()}return null}(t.videoTime,o,t.currentInterval.videoDuration,D);if("number"==typeof i&&t.props.playing&&!n&&a){var l=I();t.logVideoEvent(6906,g(g({},t.currentInterval),{},{startTime:l,endTime:l,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*i),quartilePercentValue:i}))}t.videoTime=o,t.props.onTimeChange&&t.props.onTimeChange(e)}}),k(w(t),"handleDurationChange",function(e){t.currentInterval.videoDuration=1e3*e.duration,t.props.onDurationChange&&t.props.onDurationChange(e)}),k(w(t),"handleReady",function(e){t.state.ready||t.setState({ready:!0}),t.props.onReady&&t.props.onReady(e)}),k(w(t),"handleEnded",function(e){t.logFourthQuartileEvent(),t.props.loop&&(t.startNewInterval(),t.currentInterval.videoStartTime=0),t.props.onEnded&&t.props.onEnded(e)}),k(w(t),"handleVisibilityChange",function(e){if(0!==e.length){var r=function(e,t){for(var r=0;r<t.length;r+=1){var n=t[r],a=t[r+1];if(null==a||n<=e&&e<a)return n}return null}(Number.parseFloat(e.slice(-1)[0].intersectionRatio.toFixed(2)),R);"number"==typeof r&&(t.visible=r>=.5),null==r||r===t.currentInterval.viewability||t.fullscreen||(0===r?t.startNewInterval({viewability:r,playbackState:A.PAUSED}):t.startNewInterval({viewability:r}))}}),k(w(t),"handleFullscreenChange",function(e){var r=e.event,n=e.fullscreen;if(n){var a=window.screen,o=a.height,i=a.width;t.startNewInterval({height:o,width:i,windowHeight:o,windowWidth:i})}else n||t.startNewInterval(t.getDimensions());t.fullscreen=n,t.props.onFullscreenChange&&t.props.onFullscreenChange({event:r,fullscreen:n})}),k(w(t),"handleClose",function(){t.startNewInterval()}),k(w(t),"handleContextMenu",function(e){e.preventDefault()}),t.state={ready:!1,seeking:!1};var t,r=I();return t.handleWindowResize=o()(t.handleWindowResize,1e3),t.currentInterval={videoDuration:0,startTime:r,endTime:r,videoStartTime:0,videoEndTime:0,isAudible:L(e),playbackState:t.getPlaybackState(e,t.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},t.videoTime=0,t.fullscreen=!1,t.visible=null,t}return r=[{key:"componentDidMount",value:function(){this.currentInterval=g(g({},this.currentInterval),this.getDimensions()),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}},{key:"componentDidUpdate",value:function(e,t){var r={};L(e)&&!L(this.props)?r.isAudible=!1:!L(e)&&L(this.props)&&(r.isAudible=!0);var n=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==n&&(r.playbackState=n),Object.keys(r).length>0&&this.startNewInterval(r)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}},{key:"getPlaybackState",value:function(e,t){return t.ready?e.playing&&!t.seeking?A.PLAYING:A.PAUSED:A.LOADING}},{key:"getDimensions",value:function(){if(this.videoWrapperRef.current){var e,t,r=this.videoWrapperRef.current;r.clientHeight&&r.clientWidth&&(e=r.clientHeight,t=r.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}},{key:"logVideoEvent",value:function(e,t){var r=this.props,n=r.closeupStoryPinViewability,a=r.contextLogData,o=r.logContextEvent,i=r.playing,l=r.surface,s=this.state.seeking,u=t.height,c=t.width,y=t.windowHeight,v=t.windowWidth,m=t.viewability,h=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,b);if(null!=u&&null!=c&&null!=y&&null!=v&&null!=m){var P,S,w,O,k,E,T,D,R,C,j,_,A,I,L,V,x,M=g(g({},h),{},{gridAutoplay:6904===e&&i&&!s&&("AuthHomefeed"===l||"SearchItem"===l||"RelatedPinGrid"===l),height:u,width:c,windowHeight:y,windowWidth:v,viewability:n||m});o(g({event_type:e},(w=(S=(P=g(g({},a),{},{view:this.fullscreen?108:a.view,eventData:{videoEvent:M}})).eventData.videoEvent).gridAutoplay,O=S.videoDuration,k=S.startTime,E=S.endTime,T=S.videoStartTime,D=S.videoEndTime,R=S.isAudible,C=S.height,j=S.width,_=S.playbackState,A=S.quartile,I=S.quartilePercentValue,L=S.windowHeight,V=S.windowWidth,x=S.viewability,{component:P.component,object_id_str:P.objectId,view_type:P.view,view_parameter:P.viewParameter,aux_data:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(P,p)),event_data:{videoEventData:{gridAutoplay:w,videoDuration:O,time:k,endTime:E,videoTime:T,endVideoTime:D,isAudible:R,height:C,width:j,playbackState:_,quartile:A,quartilePercentValue:I,windowHeight:L,windowWidth:V,viewability:x}}})))}}},{key:"logFourthQuartileEvent",value:function(){var e=I();this.logVideoEvent(6906,g(g({},this.currentInterval),{},{startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1}))}},{key:"startNewInterval",value:function(e){var t=I();this.logVideoEvent(6904,g(g({},this.currentInterval),{},{endTime:t,videoEndTime:this.videoTime})),this.currentInterval=g(g(g({},this.currentInterval),e),{},{startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1})}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,r=e.backgroundColor,n=e.captions,a=e.contextLogData,o=e.controls,l=e.cropHeight,c=e.hlsConfig,d=e.inAdsDesktopVideoExperiment,p=e.isAutoPlay,f=e.loop,m=e.objectFit,b=e.onLoadedChange,h=e.onControlsPause,g=e.onControlsPlay,P=e.onSeek,S=e.onVolumeChange,w=e.playbackRate,O=e.playing,k=e.playsInline,E=e.poster,T=e.preload,D=e.rootMargin,R=e.src,C=e.surface,A=e.videoStartTime,I=e.volume,L=this.state.seeking,V=d?_:j;return void 0!==D&&(V.rootMargin=C?(0,u.e)(C):D),(0,v.jsx)(s.Z,{options:V,onVisibilityChange:this.handleVisibilityChange,children:(0,v.jsx)(i.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:l?{display:"flex",alignItems:"center",height:"".concat(l,"px")}:{}},children:(0,v.jsx)(y.default,{aspectRatio:l?236/l:t,backgroundColor:r,captions:n,contextLogData:a,controls:o,hlsConfig:c,isAutoPlay:p,loop:f,objectFit:m,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:b,onLoop:this.handleLoop,onControlsPause:h,onControlsPlay:g,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:P,onTimeChange:this.handleTimeChange,onVolumeChange:S,playbackRate:w,playing:!L&&O,onPlay:function(){},onPlayError:function(){},playsInline:k,poster:E,preload:T,src:R,videoStartTime:A,visible:this.visible,volume:I})})})}}],P(c.prototype,r),a&&P(c,a),Object.defineProperty(c,"prototype",{writable:!1}),c}(n.Component);function x(e){var t=(0,l.v)().logContextEvent;return(0,v.jsx)(V,g(g({},e),{},{logContextEvent:t}))}k(V,"defaultProps",i.nk.defaultProps)},158103:function(e,t,r){r.r(t),r.d(t,{VideoWrapper:function(){return B},default:function(){return U},getPlaylistSourceSrc:function(){return W}});var n=r(76911),a=r(908390),o=r(366284),i=r(780280),l=r(858416),s=r(562559),u=r(994320),c=r(965900),d=r(407043),p=r(391254),f=r(773285),y=r(19121),v=r(969315),m=r(179888),b=r(539766),h=r(515198),g=["view","viewParameter","component","element","objectId"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){var r=e;return t&&(r=e.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com")),r}if(Array.isArray(e)&&e[0].src){var n=e[0].src;return t&&(n=n.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com")),n}return"unsupported_type_".concat(R(e))}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(l,e);var t,r,o,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=E(l);if(t){var n=E(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return k(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(k(e=i.call.apply(i,[this].concat(r))),"state",{canPlayVideo:!1,playbackState:m.Cy.DEFAULT,videoStartTime:e.props.seekTime?e.props.seekTime:e.props.videoStartTime||0}),T(k(e),"errorRetryCount",2),T(k(e),"hasSegmentStarted",!1),T(k(e),"hasPlaybackStarted",!1),T(k(e),"hasVideoSessionStarted",!1),T(k(e),"hasVideoSessionEnded",!1),T(k(e),"lastStallTime",null),T(k(e),"lastPauseTime",null),T(k(e),"logSessionStartOnNextPlay",!1),T(k(e),"playerId",""),T(k(e),"videoSessionId",""),T(k(e),"videoVisibleTime",null),T(k(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:C(e.props.src,e.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),T(k(e),"componentDidMount",function(){var t,r,n=e.props,a=n.contextLogData,o=n.playing,i=(void 0===a?{}:a).is_closeup_video,l=void 0!==i&&i;(0,v.tE)("videoMounted",!1,l),o&&(e.videoVisibleTime=new Date,e.logPlaybackPerformance(m.DR,{initiator:"mount"}));var s=null===(t=e.videoPlayerRef)||void 0===t?void 0:null===(r=t.video)||void 0===r?void 0:r.textTracks[0];s&&s.addEventListener("cuechange",function(){var e=s.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})}),T(k(e),"componentDidUpdate",function(t){var r,n,a=e.props,o=a.playing,i=a.visible,l=a.appInFocus,s=a.seekTime,u=a.captionsEnabled;s&&s!==t.seekTime&&e.setState({videoStartTime:s});var c=null===(r=e.videoPlayerRef)||void 0===r?void 0:null===(n=r.video)||void 0===n?void 0:n.textTracks[0];c&&(u?c.mode="showing":c.mode="disabled"),t.appInFocus&&!l&&(e.logPlaybackPerformance(m.$f,{initiator:"update"}),e.logSessionStartOnNextPlay=!0),t.visible&&!1===i&&(e.logSessionStartOnNextPlay=!1,e.updatePauseDuration(),e.logPlaybackPerformance(m.$f,{initiator:"update"})),!1===t.visible&&!0===i&&(e.videoVisibleTime=e.videoVisibleTime||new Date,o?(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(m.DR,{initiator:"update"})):e.logSessionStartOnNextPlay=!0),o&&l&&e.logSessionStartOnNextPlay&&(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(m.DR,{initiator:"update"}),e.logSessionStartOnNextPlay=!1)}),T(k(e),"addSegment",function(){var t=e.playbackPerformance,r=t.canPlayTime,n=t.loadStartTime,a=t.segments,o=t.srcString,i=-1;r&&n&&0===a.length&&(i=r>n?r-n:0);var l=e.videoPlayerRef&&e.videoPlayerRef.video,s={indicatedKbps:-1,duration:l&&l.duration*m.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:i,switchBitrateKbps:-1,uri:o,viewportWidth:l&&l.clientWidth||-1,viewportHeight:l&&l.clientHeight||-1,watchedDurationMs:0};a.push(s)}),T(k(e),"getCurrentVideoTime",function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*m.gJ:0}),T(k(e),"getVideoResourceTiming",function(){var t,r;if(null!==(t=window)&&void 0!==t&&null!==(r=t.performance)&&void 0!==r&&r.getEntriesByName&&e.playbackPerformance.srcString){var n=window.performance.getEntriesByName(e.playbackPerformance.srcString);return n.length>0&&n[0]||null}return null}),T(k(e),"handleCanPlayVideo",function(t){var r=e.props,n=r.contextLogData,a=r.onReady,o=r.playing,i=(void 0===n?{}:n).is_closeup_video,l=void 0!==i&&i,s=e.state.canPlayVideo;(0,v.tE)("handleCanPlayVideo",!1,l,{firstCanPlayEvent:!s,playing:o}),e.playbackPerformance.hasFatalError=!1,s||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),a&&a(t)}),T(k(e),"handleEnded",function(t){var r=e.props,n=r.loop,a=r.onEnded,o=e.playbackPerformance.segments,i=o&&o[o.length-1];n&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.hasSegmentStarted=!1):n||e.logPlaybackPerformance(m.$f,{initiator:"videoEnded",loop:n}),e.setState({playbackState:m.Cy.ENDED}),a&&a(t)}),T(k(e),"handleError",function(){var t,r,n,a,o,i,l,s,u=e.props.contextLogData,c=(void 0===u?{}:u).is_closeup_video,d=void 0!==c&&c,p=e.videoPlayerRef&&e.videoPlayerRef.video;(null==p?void 0:null===(t=p.error)||void 0===t?void 0:t.code)!==m.lG.MEDIA_ERR_ABORTED&&(e.playbackPerformance.hasFatalError=!0),e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat((null==p?void 0:null===(r=p.error)||void 0===r?void 0:r.message)||""),e.playbackPerformance.errorCode=(null==p?void 0:null===(n=p.error)||void 0===n?void 0:n.code)||0,e.playbackPerformance.errorName=(null==p?void 0:null===(a=p.error)||void 0===a?void 0:null===(o=a.message)||void 0===o?void 0:o.slice(0,100))||"unknown",e.playbackPerformance.errorReason=(null==p?void 0:null===(i=p.error)||void 0===i?void 0:null===(l=i.message)||void 0===l?void 0:l.slice(0,100))||"unknown";var f={errorName:e.playbackPerformance.errorCode,errorReason:e.playbackPerformance.errorName,errorRetryCount:e.errorRetryCount,playbackState:e.state.playbackState,networkState:(null==p?void 0:p.networkState)||"unknown"};switch((0,v.tE)("fatalError",!1,d,f),null==p?void 0:null===(s=p.error)||void 0===s?void 0:s.code){case m.lG.MEDIA_ERR_ABORTED:break;case m.lG.MEDIA_ERR_NETWORK:case m.lG.MEDIA_ERR_DECODE:case m.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:e.errorRetryCount>0&&(null==p||p.load(),e.errorRetryCount-=1)}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:m.Cy.FAILED})}),T(k(e),"handleLoadedMetadata",function(){e.setState({playbackState:m.Cy.LOADED_METADATA})}),T(k(e),"handleLoadStart",function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:m.Cy.LOAD_START})}),T(k(e),"handleLoadedData",function(){e.setState({playbackState:m.Cy.LOADED_DATA})}),T(k(e),"handlePlaying",function(){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.hasSegmentStarted||e.addSegment(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:m.Cy.PLAYING}),e.props.clearSeekTime&&e.props.clearSeekTime()}),T(k(e),"handleUserPause",function(t){var r=t.event,n=e.props.onControlsPause;e.lastPauseTime=new Date,n&&n({event:r})}),T(k(e),"handleVideoPause",function(){e.state.playbackState===m.Cy.STALLING||e.state.playbackState===m.Cy.SEEKING||(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:m.Cy.PAUSED})}),T(k(e),"handleSeeking",function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&(r.lastStartPlayTime=null),e.state.playbackState!==m.Cy.ENDED&&e.setState({playbackState:m.Cy.SEEKING})}),T(k(e),"handleStalled",function(){null===e.lastStallTime&&e.state.playbackState!==m.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1,e.setState({playbackState:m.Cy.STALLING}))}),T(k(e),"handleTimeUpdate",function(t){var r=e.props.onTimeChange;r&&r(t),e.state.playbackState===m.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())}),T(k(e),"resetPlaybackMetrics",function(){e.hasSegmentStarted=!0,e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=S(S({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]}),T(k(e),"setLastSegmentStartPlayTime",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&null===r.lastStartPlayTime&&(r.lastStartPlayTime=e.getCurrentVideoTime())}),T(k(e),"setLastSegmentPlaybackStartDate",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1];r&&null===r.playbackStartDate&&(r.playbackStartDate=Date.now())}),T(k(e),"setPlaybackStartTime",function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)}),T(k(e),"setVideoPlayerRef",function(t){var r=e.props.setVideoRef;if(t&&(r&&r(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var n=e.videoPlayerRef.video;n.addEventListener("loadedmetadata",e.handleLoadedMetadata),n.addEventListener("loadeddata",e.handleLoadedData),n.addEventListener("pause",e.handleVideoPause),n.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}}),T(k(e),"updateStallDuration",function(){if(null!==e.lastStallTime){var t=k(e).lastStallTime;e.playbackPerformance.totalStallDurationMs+=new Date-t,e.lastStallTime=null}}),T(k(e),"updatePauseDuration",function(){if(null!==e.lastPauseTime){var t=k(e).lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}}),T(k(e),"updateWatchDurationForCurrentSegment",function(){var t=e.playbackPerformance.segments,r=t&&t[t.length-1],n=r?r.lastStartPlayTime:null,a=e.getCurrentVideoTime();if(r&&null!==n&&"number"==typeof a&&"number"==typeof n){var o=a-n;o>0&&(r.watchedDurationMs+=o,r.lastStartPlayTime=null)}}),T(k(e),"logPlaybackPerformance",function(t,r){var n=e.props,a=n.contextLogData,o=void 0===a?{}:a,i=n.userId,l=n.isAutoPlay,s=n.logContextEvent,u=n.preload,c=o.is_closeup_video,d=void 0!==c&&c,p=e.playbackPerformance,f=p.canPlayTime,y=p.detailedErrors,b=p.errorCode,h=p.errorName,P=p.errorReason,w=p.hasFatalError,O=p.loadStartTime,k=p.totalPauseDurationMs,E=p.totalStallDurationMs,T=p.numberOfStalls,D=p.numberOfSeeks,R=p.playbackStartTimestamp,C=p.segments,j=p.srcString,_=e.videoPlayerRef&&e.videoPlayerRef.video,A=t===m.DR,I=A&&!e.hasVideoSessionStarted,L=!A&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(_&&(I||L)){var V,x=-1;f&&O&&(x=f>O?f-O:0);var M=-1;f&&e.videoVisibleTime&&(M=f>e.videoVisibleTime?f-e.videoVisibleTime:0),A&&(e.videoSessionId=(0,m.Y7)(i),e.playerId=e.playerId||(0,m.EB)());var F=e.getVideoResourceTiming(),N={averageVideoKbps:-1,autoplaying:l,detailedErrors:y,downloadedKiloBytes:"number"==typeof(null==F?void 0:F.decodedBodySize)&&F.decodedBodySize/m.Fm||0,errorCode:b,errorName:h,errorReason:P,fatalError:w,isCellular:!1,nativeVideoDurationMs:_.duration*m.gJ||-1,numberOfStalls:T,numberOfSeeks:D,overallPausedDurationMs:k,overallBufferDurationMs:E,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:R||-1,segments:[],sessionMark:t,screenPixelScale:null!==(V=window)&&void 0!==V&&V.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:_.clientWidth,startupPlayerHeight:_.clientHeight,startupTimeMs:x,startupLatencyMs:M,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:_.videoWidth,startupVariantHeight:_.videoHeight,videoUrl:j,wasVideoPreloaded:"auto"===u};if(!A){e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var H=C.reduce(function(e,t){return e+(t.watchedDurationMs||0)},0);N.overallWatchedDurationMs=H,N.startupVariantWatchedDurationMs=H,N.segments=e.playbackPerformance.segments,0===H?(N.errorName="invalid_watch_duration",N.rebufferRate=-1):N.rebufferRate=E/H}(0,v.ZP)(N,!1,d,S({playbackState:e.state.playbackState},r)),s({event_type:3606,event_data:{videoPerformanceData:N},view_type:o.view,view_parameter:o.viewParameter,component:o.component,element:o.element,object_id_str:o.objectId,aux_data:S(S({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(o,g)),{},{is_closeup_video:d,playback_session_id:e.videoSessionId})}),A?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,v.tE)(A?"sessionStart":"sessionEnd",!1,d,S({playbackState:e.state.playbackState},r))}}),e}return r=[{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(m.$f,{initiator:"unmount",loop:e})}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,r=e.captions,o=e.controls,i=e.loop,l=e.loopOverride,s=e.objectFit,u=e.onDurationChange,c=e.onFullscreenChange,d=e.onLoadedChange,f=e.onControlsPlay,y=e.onPlayheadDown,v=e.onPlayheadUp,m=e.onSeek,g=e.onVolumeChange,P=e.playbackRate,S=e.playing,w=e.playsInline,O=e.poster,k=e.preload,E=e.src,T=e.volume,D=this.state,R=D.canPlayVideo,j=D.videoStartTime;return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(p.Z,{unsafeCSS:b.P}),(0,h.jsx)(a.nk,{autoplay:R&&S,aspectRatio:t,captions:r,controls:o,loop:void 0===l?i:l,objectFit:s,onDurationChange:u,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:c,onLoadedChange:d,onLoadStart:this.handleLoadStart,onControlsPause:this.handleUserPause,onControlsPlay:f,onPlaying:this.handlePlaying,onPlayheadDown:y,onPlayheadUp:v,onReady:this.handleCanPlayVideo,onSeek:m,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:g,onWaiting:this.handleStalled,playbackRate:P,onPlay:function(){},onPlayError:function(){},playing:R&&S,playsInline:w,poster:O,preload:k,ref:this.setVideoPlayerRef,src:C(E,this.props.quicExpGroup),startTime:j||void 0,volume:T})]})}}],w(l.prototype,r),o&&w(l,o),Object.defineProperty(l,"prototype",{writable:!1}),l}(n.Component),_=(0,n.memo)(function(e){var t=(0,d.v)().logContextEvent,r=(0,i.B)(),n=r.country,a=r.isAuthenticated,o=r.isBot,s=r.isSocialBot,u=r.unauthId,p=r.userAgent,m=p.browserName,b=p.browserVersion,g=p.isMobile,P=e.contextLogData,w=void 0===P?{}:P,O=w.is_closeup_video,k=w.view,E=w.viewParameter,T=(0,c.I)().appUI.appInFocus,D=(0,f.F)().checkExperiment,R=(0,l.RC)().clearSeekTime,C=null;a&&(C=D("web_video_quic").group.length?D("web_video_quic").group:null);var _=(0,y.Z)();return(0,v.r$)({browserName:m,browserVersion:b,country:n,isAuthenticated:a,isBot:o,is_closeup_video:void 0!==O&&O,isMobile:g,isSocialBot:s,view:k,viewParameter:E}),(0,h.jsx)(j,S(S({},e),{},{userId:_.id||u,appInFocus:T,quicExpGroup:C,logContextEvent:t,clearSeekTime:R}))});function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){N(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var W=function(e){if(Array.isArray(e)){var t=e.find(function(e){return"video/m3u8"===e.type});return t?t.src:void 0}return/m3u8$/.test(e)?e:void 0},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(i,e);var t,r,n,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=F(i);if(t){var n=F(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return M(e)}(this,e)});function i(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),N(M(t=a.call(this,e)),"componentDidUpdate",function(e){var r;e.videoStartTime&&t.props.videoStartTime&&e.videoStartTime<t.props.videoStartTime&&null!==(r=t.videoPlayerRef)&&void 0!==r&&r.video&&(t.videoPlayerRef.video.currentTime=t.props.videoStartTime)}),N(M(t),"setVideoPlayerRef",function(e){e&&(t.videoPlayerRef=e)}),N(M(t),"handleOnEnded",function(e){var r=e.event,n=t.props,a=n.loop,o=n.onLoop,i=n.onEnded;i&&(i({event:r}),t.videoPlayerRef&&t.videoPlayerRef.video&&a&&(t.videoPlayerRef.video.play(),o&&o()))});var t,r=W(e.src);return t.state={useHlsVideo:!e.preferMp4&&!(0,o.G6)(e.requestContext.userAgent.browserName)&&!!r},t}return r=[{key:"render",value:function(){var e=this.props,t=e.aspectRatio,r=e.appInFocus,n=e.backgroundColor,a=e.captions,o=e.toggleCaptions,i=e.clearSeekTime,l=e.contextLogData,u=e.controls,c=e.hlsConfig,d=e.isAutoPlay,p=e.loop,f=e.objectFit,y=e.onDurationChange,v=e.onEnded,m=e.onFullscreenChange,b=e.onLoadedChange,g=e.onControlsPause,P=e.onControlsPlay,S=e.onPlayheadDown,w=e.onPlayheadUp,O=e.onReady,k=e.onSeek,E=e.onTimeChange,T=e.onVolumeChange,D=e.playbackRate,R=e.playing,C=e.playsInline,j=e.poster,A=e.preferMp4,I=e.preload,V=e.seekTime,x=e.src,M=e.videoStartTime,F=e.visible,N=e.volume,H=this.state.useHlsVideo,B=W(x),U=L(L({},c),{},{startPosition:M||-1}),G=!v&&p;return H&&B?(0,h.jsx)(s.Z,{aspectRatio:t,appInFocus:r,backgroundColor:n,captions:a,clearSeekTime:i,contextLogData:l,controls:u,hlsConfig:U,isAutoPlay:d,loop:p,loopOverride:G,objectFit:f,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:m,onLoadedChange:b,onControlsPause:g,onControlsPlay:P,onPlayheadDown:S,onPlayheadUp:w,onReady:O,onSeek:k,onTimeChange:E,onVolumeChange:T,playbackRate:D,onPlay:function(){},onPlayError:function(){},playing:R,playsInline:C,poster:j,preload:I,seekTime:V,setVideoRef:this.setVideoPlayerRef,src:B,visible:F,volume:N}):(0,h.jsx)(_,{aspectRatio:t,captions:a,captionsEnabled:o,clearSeekTime:i,contextLogData:l,controls:u,isAutoPlay:d,loop:p,loopOverride:G,objectFit:f,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:m,onLoadedChange:b,onControlsPause:g,onControlsPlay:P,onPlayheadDown:S,onPlayheadUp:w,onReady:O,onSeek:k,onTimeChange:E,onVolumeChange:T,playbackRate:D,onPlay:function(){},onPlayError:function(){},playing:R,playsInline:C,poster:j,preload:I,seekTime:V,setVideoRef:this.setVideoPlayerRef,src:A?x:B||x,videoStartTime:M,visible:F,volume:N})}}],V(i.prototype,r),n&&V(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.PureComponent);function U(e){var t=(0,c.I)().appUI.appInFocus,r=(0,l.Hx)().seekTime,n=(0,u.r)().captionsEnabled,a=(0,l.RC)().clearSeekTime,o=(0,i.B)();return(0,h.jsx)(B,L(L({},e),{},{appInFocus:t,requestContext:o,clearSeekTime:a,toggleCaptions:n,seekTime:r}))}},944546:function(e,t,r){r.d(t,{V:function(){return n},i:function(){return a}});var n=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/85547-a4784b76ac5f258c.js.map