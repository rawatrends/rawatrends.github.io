"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[44970],{936776:function(e,t){var n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i;t.Z=function(e){return n.test(e)}},79113:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(76911),o=n(908390),i=n(643010),s=n(968121),a=n(124580),c=n(740990),l=n(223815),u=n(965900),d=n(515198);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y={__style:{border:(0,i.Yc)()?void 0:"1px solid #efefef",width:"100vw",maxHeight:"100%",height:"100%",overflow:"auto",top:"0",left:"0",position:"fixed",backgroundColor:(0,i.Yc)()?"#000":"#fff",transition:"transform 0.3s ease-out, visibility 0.5s",WebkitOverflowScrolling:"touch"}},g={modalOpen:{__style:p({},y.__style)},modalClose:{__style:p(p({},y.__style),{},{transform:"translate3d(0px, 100%, 0px)",visibility:"hidden"})}};function _(e){var t=e.accessibilityModalLabel,n=e.allowClickAndDrag,i=e.children,f=e.isOpen,h=(0,u.I)().setAppFocusState,p=(0,r.useRef)(null);return(0,r.useEffect)(function(){return f&&(a.Z.pause(),h(!1),document.body&&(document.body.style.overflow="hidden")),function(){f&&(a.Z.resume(),h(!0),document.body&&(document.body.style.overflow=""))}},[f,h]),(0,d.jsx)(l.Z,{allowClickAndDrag:n,children:(0,d.jsx)(o.mh,{zIndex:s.b7,children:(0,d.jsx)(o.xu,{display:"inlineBlock",role:"dialog","aria-label":t,children:(0,d.jsx)(o.xu,{ref:p,dangerouslySetInlineStyle:{__style:f?g.modalOpen.__style:g.modalClose.__style},children:(0,d.jsx)(c.Z.Provider,{value:p.current,children:i})})})})})}},341511:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(908390),o=n(898781),i=n(79113),s=n(515198);function a(e){var t=e.contactSuggestions,n=e.heading,a=e.isOpen,c=e.onDismiss,l=e.width,u=(0,o.ZP)();return(0,s.jsxs)(i.Z,{isOpen:a,accessibilityModalLabel:n,children:[(0,s.jsxs)(r.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,s.jsx)(r.xu,{display:"flex",alignItems:"center",padding:1,"data-test-id":"close-contact-button",children:(0,s.jsx)(r.hU,{accessibilityLabel:u._('Close', 'close share menu', 'close share menu'),icon:"cancel",onClick:c,size:"sm",iconColor:"darkGray",padding:4})}),(0,s.jsx)(r.xu,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"center",marginEnd:12,children:(0,s.jsx)(r.xv,{align:"center",weight:"bold",children:(0,s.jsx)("span",{className:"deprecatedTextSizeXL",children:n})})})]}),(0,s.jsx)(r.kC,{justifyContent:"center",children:(0,s.jsx)(r.xu,{width:l,height:"100%","data-test-id":"share-menu",children:t})})]})}},878499:function(e,t,n){n.d(t,{$:function(){return g},l:function(){return _}});var r=n(76911),o=n(214494),i=n(425288),s=n(773285),a=n(50286),c=n(829407),l=n(19121),u=n(67347),d=n(515198);function f(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){n(e);return}a.done?t(c):Promise.resolve(c).then(r,o)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,i.Z)("ShareSuggestions"),y=p.Provider,g=p.useHook;function _(e){var t,n=e.children,i=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(void 0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=i[0],g=i[1],_=(0,s.F)().checkExperiment,b=(0,l.Z)(),v=!(0,a.HG)()&&!b.isLimitedLogin&&b.isAuth&&b.should_show_messaging&&_("mweb_pre_cache_contacts").anyEnabled;(0,c.Z)(function(){var e,t,n=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.Z.create("ShareSuggestionsResource",{suggestion_type:"share",hide_group_conversations:!0}),e.prev=1,e.next=4,t.callGet();case 4:g(e.sent.resource_response.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,u.nP)("mweb_share_menu_load_suggestions.fail.share",{sampleRate:1});case 12:case"end":return e.stop()}},e,null,[[1,9]])}),t=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){f(i,r,o,s,a,"next",e)}function a(e){f(i,r,o,s,a,"throw",e)}s(void 0)})},function(){return t.apply(this,arguments)});v&&!p&&n()});var m=(0,r.useCallback)(function(){g(void 0)},[]),x=(0,r.useCallback)(function(e){g(e)},[]),S=(0,r.useMemo)(function(){return{cachedShareSuggestions:p,clearCachedShareSuggestions:m,updateCachedShareSuggestions:x}},[p,m,x]);return(0,d.jsx)(y,{value:S,children:n})}},902626:function(e,t,n){n.d(t,{Z:function(){return et}});var r=n(76911),o=n(506979),i=n(599689),s=n(908390),a=n(214494),c=n(112690),l=n(385740),u=n(766935),d=n(898781),f=n(53987),h=n(248327),p=n(936776),y=n(700380),g=n(19121),_=n(698330),b=n(407043),v=n(356997),m=n(499128),x=n(349700),S=n(784590),j=n(343341),w=n(313951),P=n(927383),O=n(67347),C=n(515198);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){L(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){n(e);return}a.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,n){return(t=Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,o,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=D(a);if(t){var r=D(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return I(e)}(this,e)});function a(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a);for(var e,t,n,r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];return L(I(e=i.call.apply(i,[this].concat(o))),"state",{viewConversation:!1,isSent:!1,path:""}),L(I(e),"renderViewConversationButton",function(){return e.state.viewConversation?(0,C.jsxs)(s.kC,{alignItems:"center",direction:"row",flex:"grow",justifyContent:"center",children:[(0,C.jsx)(s.zx,{fullWidth:!0,size:"sm",text:e.props.i18n._('View chat', 'View current chat', 'View current chat'),color:"white",onClick:function(){e.onViewConversation()}}),(0,C.jsx)(s.JO,{icon:"arrow-forward",color:"default",accessibilityLabel:e.props.i18n._('View chat', 'View current chat', 'View current chat')})]}):(0,C.jsxs)(s.kC,{alignItems:"center",direction:"row",flex:"grow",justifyContent:"center",children:[(0,C.jsx)(s.xu,{marginEnd:2,children:(0,C.jsx)(s.JO,{icon:"check",color:"default",accessibilityLabel:e.props.i18n._('sent', 'content is sent', 'content is sent')})}),(0,C.jsx)(s.xu,{marginEnd:2,children:(0,C.jsx)(s.xv,{size:"300",color:"subtle",weight:"bold",children:e.props.i18n._('Sent', 'mweb.sharemenu.contactItem.isSent', 'Text notification indicating a Pin has been sent to a pinner')})})]})}),L(I(e),"onViewConversation",function(){var t,n=e.state.path,r=e.props,o=r.sendObject,i=r.component;(0,O.nP)("mweb_sharesheet_view_conversation",{sampleRate:1}),e.props.history.push(n),t=3===o.objectType?13532:2===o.objectType?13529:13526,e.props.logContextEvent({view_type:e.props.viewType,event_type:10399,component:i,element:t})}),L(I(e),"onInlineSend",e.props.requireAuthForLimitedLogin({fn:(t=regeneratorRuntime.mark(function t(){var n,r,o,i,s,a,c,l,u,d,f,h,p,y,g,_,b,S,j;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return L(n={},1,"pin"),L(n,2,"board"),L(n,3,"user"),L(n,8,"today_article"),r=n,i=(o=e.props).createConversation,s=o.i18n,a=o.isFullHeight,c=o.onDismiss,l=o.setShareSent,u=o.recipient,d=o.sendObject,f=o.showToast,h=o.email,p=o.updateCachedContactsAfterSend,y=o.userId,g=o.logContextOnSend,_=r[d.objectType],null==g||g(),e.setState({isSent:!0}),t.prev=5,t.next=8,i((L(b={user_ids:u?[u.id,y]:void 0},_,d.objectId),L(b,"emails",h?[h]:void 0),b));case 8:(S=t.sent)&&(j=S.id,e.setState({path:"/conversation/".concat(j),viewConversation:!0},function(){(0,O.nP)("mweb_sharesheet.inline_send",{sampleRate:1,tags:{success:!0}}),l(!0),null==p||p(),!a&&c&&(f(function(t){var n=t.hideToast;return(0,C.jsx)(m.ZP,{dataTestId:"sharesheet-inline-send-toast",primaryAction:{accessibilityLabel:s._('View the conversation', 'ContactItem.ConfirmationToast.a11yButtonText', 'Button on confirmation toast after a user sends a Pin/Board/Profile to view the conversation'),label:s._('View', 'ContactItem.ConfirmationToast.buttonText', 'Button on confirmation toast after a user sends a Pin/Board/Profile to view the conversation'),onClick:function(){e.onViewConversation(),n()}},duration:4e3,onHide:n,text:(0,x.Wc)(s._('Sent to {{recipientName}}!', 'ContactItem.ConfirmationToast.text', 'Confirmation toast after a user sends a Pin/Board/Profile'),{recipientName:(null==u?void 0:u.full_name)||""}),thumbnail:{avatar:(0,C.jsx)(v.qE,{size:"fit",src:(null==u?void 0:u.image_large_url)||"",name:(null==u?void 0:u.full_name)||""})}})}),c(j))})),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(5),f(function(e){var n=e.hideToast;return(0,C.jsx)(m.ZP,{type:"error",text:(null===t.t0||void 0===t.t0?void 0:t.t0.message_detail)||(null===t.t0||void 0===t.t0?void 0:t.t0.message)||s._('Failed to create conversation.', 'ContactItem.errorToast.text', 'Error during message send from the share sheet'),onHide:n})}),e.setState({isSent:!1}),(0,O.nP)("mweb_sharesheet.inline_send",{sampleRate:1,tags:{success:!1,error:t.t0}});case 17:case"end":return t.stop()}},t,null,[[5,12]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(e){T(i,r,o,s,a,"next",e)}function a(e){T(i,r,o,s,a,"throw",e)}s(void 0)})},function(){return n.apply(this,arguments)})})),e}return n=[{key:"render",value:function(){var e,t,n,o,i,a,c=this,l=this.props,u=l.isFullHeight,d=l.recipient,f=l.email,h=l.shouldShowVerticalContacts,p=this.state.isSent,y=(0,C.jsx)(s.zx,{fullWidth:!0,size:"lg",color:"gray",text:this.props.i18n._('Send', 'Send current content', 'Send current content'),onClick:function(){c.onInlineSend()}});return!u&&d?(0,C.jsx)(r.Fragment,{children:h?(0,C.jsxs)(s.xu,{display:"flex",alignItems:"center",paddingX:3,paddingY:2,children:[(0,C.jsx)(s.kC,{height:48,width:48,flex:"none",children:(0,C.jsx)(v.qE,{size:"md",src:null!==(e=d.image_large_url)&&void 0!==e?e:"",name:null!==(t=d.full_name)&&void 0!==t?t:""})}),(0,C.jsx)(s.xu,{paddingX:2,marginStart:2,display:"flex",flex:"grow",children:(0,C.jsx)(s.xv,{lineClamp:1,children:d.full_name})}),(0,C.jsx)(s.xu,{"data-test-id":"sharesheet-send-button",children:y})]}):(0,C.jsxs)(s.xu,{"data-test-id":"sharesheet-send-button",display:"flex",direction:"column",paddingX:3,paddingY:4,children:[(0,C.jsx)(s.iP,{onTap:function(){return c.onInlineSend()},children:(0,C.jsx)(s.xu,{height:56,marginBottom:1,width:56,children:(0,C.jsx)(v.qE,{size:"fit",src:null!==(n=d.image_large_url)&&void 0!==n?n:"",name:null!==(o=d.full_name)&&void 0!==o?o:""})})}),(0,C.jsx)(s.xu,{width:56,children:(0,C.jsx)(s.xv,{lineClamp:1,size:"100",align:"center",children:d.full_name})})]})}):(0,C.jsxs)(s.xu,{"data-test-id":"sharesheet-send-button",position:"relative",direction:"row",display:"flex",width:"100%",alignItems:"center",justifyContent:"between",paddingY:2,children:[d?(0,C.jsx)(s.xu,{children:(0,C.jsx)(v.qE,{size:"md",src:null!==(i=d.image_large_url)&&void 0!==i?i:"",name:null!==(a=d.full_name)&&void 0!==a?a:""})}):f&&(0,C.jsx)(s.xu,{children:(0,C.jsx)(v.qE,{size:"md",name:f})}),(0,C.jsx)(s.xu,{paddingX:2,flex:"grow",maxWidth:"71%",children:(0,C.jsx)(s.xv,{lineClamp:1,weight:"bold",children:d?d.full_name:f&&p?f:(0,x.nk)(this.props.i18n._('invite {{email}}', 'mweb.newMessage.searchEmail', 'invite from email'),{email:f})})}),(0,C.jsx)(s.xu,{"data-test-id":"sharesheet-viewchat-link",right:!0,flex:"none",maxWidth:"100%",children:p?this.renderViewConversationButton():y})]})}}],E(a.prototype,n),o&&E(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.PureComponent);function B(e){var t=(0,i.useHistory)(),n=(0,d.ZP)(),r=(0,P.Z)(),o=(0,j.F9)().showToast,s=(0,w.aX)(),a=(0,b.v)().logContextEvent;return(0,S.Z)({name:"ConversationsResource",options:{user_ids:[e.userId]}}),(0,C.jsx)(F,k(k({},e),{},{createConversation:s,history:t,i18n:n,requireAuthForLimitedLogin:r,showToast:o,logContextEvent:a}))}var V=n(72566),N=n(878499);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){n(e);return}a.done?t(c):Promise.resolve(c).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){U(i,r,o,s,a,"next",e)}function a(e){U(i,r,o,s,a,"throw",e)}s(void 0)})}}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}var Q={boxShadow:"0 6px 8px -4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"},ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(c,e);var t,n,o,i,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=$(c);if(t){var r=$(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return G(e)}(this,e)});function c(e){var t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,c),J(G(t=a.call(this,e)),"state",{value:"",showScrollShadow:!1,defaultSuggestions:[],loadingDefaultSuggestions:!0}),J(G(t),"onSearchChange",function(e){var n=e.value,r=t.props,o=r.userId,i=r.searchContacts;t.setState({value:n},i({options:{user:o,term:n}}))}),J(G(t),"getContactSuggestions",function(){var e=t.props,n=e.typeaheadSuggestions,r=e.userId,o=t.state,i=o.value,s=o.defaultSuggestions;if(!i)return s.filter(function(e){return e.id})||[];var a='term="'.concat(i,'",user="').concat(r,'"'),c='term="'.concat(i.slice(0,-1),'",user="').concat(r,'"');return n[a]||n[c]||[]}),J(G(t),"renderContactSuggestions",function(){var e,n=t.props,o=n.expandContactsList,i=n.fetching,a=n.i18n,c=n.isFullHeight,l=n.logContextEvent,u=n.onDismiss,d=n.onSave,h=n.sendObject,y=n.setShareSent,g=n.showSaveOption,_=n.userId,b=n.updateCachedContactsAfterSend,v=n.viewType,m=n.viewParameter,x=n.shouldShowVerticalContacts,S=n.location,j=n.component,w=t.state,P=w.loadingDefaultSuggestions,O=w.value,A=t.getContactSuggestions(),z=i||P,k=x?48:56,T=function(){var e;l({event_type:102,view_type:70,view_parameter:256,component:14315,element:13498}),e=3===h.objectType?13531:2===h.objectType?13528:13525,l({view_type:(0,f.b0)(S)?42:v,view_parameter:(0,f.b0)(S)?203:m,event_type:10399,component:j,element:e}),o()},E=function(e){var t,n=O&&O.trim(),r=e||{},o=r.selected_contact_index,i=r.selected_contact_reason,s=function(){return n?(0,p.Z)(n)?{is_selected_contact_email:"true"}:{search_query_length:JSON.stringify(n.length),selected_contact_index:o,selected_contact_reason:i}:{selected_contact_index:o,selected_contact_reason:i}};l({event_type:102,view_type:70,view_parameter:c?3827:256,component:n?14314:14315,element:10837,aux_data:s()}),t=3===h.objectType?13530:2===h.objectType?13527:13524,l({event_type:10399,view_type:(0,f.b0)(S)?42:v,view_parameter:(0,f.b0)(S)?203:m,component:j,element:t,aux_data:s()})};return(e=!c&&z?107:"100%",z)?(0,C.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",height:e,paddingY:2,children:(0,C.jsx)(s.$j,{show:!0,accessibilityLabel:a._('Searching for contacts', 'Placeholder text for spinner on share menu', 'Placeholder text for spinner on share menu')})}):0===A.length&&!(0,p.Z)(O)&&O&&c?(0,C.jsx)(s.xu,{marginTop:3,children:(0,C.jsx)(s.xv,{align:"center",children:a._('Sorry, we can\'t find anyone by that name.', 'Text to show empty state when a contact can not be found', 'Text to show empty state when a contact can not be found')})}):(0,C.jsx)(s.kC,{direction:c?"column":"row",overflow:c?void 0:"hidden",children:(0,C.jsxs)(s.xu,{display:c?void 0:"flex",direction:!c&&x?"column":void 0,height:e,overflow:c||x?void 0:"scrollX",paddingX:c?4:1,width:"100%",children:[0===A.length&&(0,p.Z)(O)&&(0,C.jsx)(B,{email:O,isFullHeight:c,sendObject:h,setShareSent:y,userId:_,logContextOnSend:E,viewType:v,component:j}),!c&&(0,C.jsxs)(r.Fragment,{children:[g&&d&&(0,C.jsxs)(s.xu,{alignItems:"center",display:"flex",direction:x?"row":"column",paddingX:3,paddingY:x?2:4,children:[(0,C.jsx)(s.xu,{marginEnd:x?1:void 0,marginBottom:x?void 0:1,"data-test-id":"sharesheet-search-icon",width:k,height:k,children:(0,C.jsx)(s.I_,{accessibilityLabel:a._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"red",href:"/pin/".concat(h.objectId,"/repin"),icon:"save-outline",iconColor:"white",onClick:d,size:x?"lg":"xl"})}),(0,C.jsx)(s.xu,{paddingX:x?1:void 0,marginStart:x?2:void 0,display:"flex",flex:"grow",children:(0,C.jsx)(s.iP,{onTap:x?T:void 0,children:(0,C.jsx)(s.xv,{lineClamp:1,size:x?void 0:"100",children:a._('Save', 'ContactsSuggestions.SaveOption.text', 'Label for save icon in Contacts Suggestions list')})})})]}),(0,C.jsxs)(s.xu,{alignItems:"center",display:"flex",direction:x?"row":"column",paddingX:3,paddingY:x?2:4,children:[(0,C.jsx)(s.xu,{marginEnd:x?1:void 0,marginBottom:x?void 0:1,"data-test-id":"sharesheet-search-icon",width:k,height:k,children:(0,C.jsx)(s.hU,{accessibilityLabel:a._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:T,size:x?"lg":"xl"})}),(0,C.jsx)(s.xu,{paddingX:x?1:void 0,marginStart:x?2:void 0,display:"flex",flex:"grow",children:(0,C.jsx)(s.iP,{onTap:x?T:void 0,children:(0,C.jsx)(s.xv,{lineClamp:1,size:x?void 0:"100",children:x?a._('Search contacts', 'ContactsSuggestions.SearchOption.text', 'Label for search icon in Contacts Suggestions list'):a._('Search', 'ContactsSuggestions.SearchOption.text', 'Label for search icon in Contacts Suggestions list')})})})]})]}),A.map(function(e,t){return(0,C.jsx)(B,{isFullHeight:c,onDismiss:u,recipient:e,sendObject:h,setShareSent:y,userId:_,updateCachedContactsAfterSend:b,logContextOnSend:function(){E({selected_contact_index:JSON.stringify(t),selected_contact_reason:JSON.stringify(e.debug_reason.reason)})},viewType:v,shouldShowVerticalContacts:x,component:j},e.id)})]})})}),t.scrollerRef=(0,r.createRef)(),t}return o=[{key:"componentDidUpdate",value:function(e){var t=e.fetching,n=this.state.value,r=t&&!this.props.fetching,o=this.getContactSuggestions();if(!n&&r){var i=o.length>0?7511:7512;this.props.logContextEvent({event_type:i,view_type:70,view_parameter:256})}}},{key:"componentDidMount",value:(n=q(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this.props).cachedShareSuggestions,r=t.getFreshContactSuggestions,o=t.updateCachedShareSuggestions,!n){e.next=5;break}this.setState({loadingDefaultSuggestions:!1,defaultSuggestions:n}),e.next=13;break;case 5:return e.next=7,r();case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=[];case 10:i=e.t0,o(i),this.setState({loadingDefaultSuggestions:!1,defaultSuggestions:i});case 13:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.showScrollShadow,n=this.props,o=n.isFullHeight,i=n.expandContactsList,a=(0,y.Z)(function(){var t=e.scrollerRef.current;t&&!Number.isNaN(t.scrollTop)&&e.setState({showScrollShadow:t.scrollTop>0})},100);return(0,C.jsx)(r.Fragment,{children:o?(0,C.jsxs)(s.xu,{color:"default",display:"flex",direction:"column",paddingX:0,height:"90%",children:[(0,C.jsx)(s.xu,{"data-test-id":"contact-suggestion-search-field",paddingY:2,color:"default",paddingX:4,dangerouslySetInlineStyle:{__style:t?Q:null},children:(0,C.jsx)(V.Z,{accessibilityLabel:this.props.i18n._('search contact', 'Accessibility label for searchbar on share menu', 'Accessibility label for searchbar on share menu'),id:"contactsSuggestSearchField",onChange:this.onSearchChange,onFocus:i,placeholder:this.props.i18n._('Search by name or email', 'Placeholder text for searchbar on share menu', 'Placeholder text for searchbar on share menu'),value:this.state.value,autoFocus:o})}),(0,C.jsx)(s.xu,{display:"flex",direction:"column",paddingY:1,overflow:"scrollY",onScroll:a,ref:this.scrollerRef,children:this.renderContactSuggestions()})]}):(0,C.jsx)(s.xu,{children:this.renderContactSuggestions()})})}}],M(c.prototype,o),i&&M(c,i),Object.defineProperty(c,"prototype",{writable:!1}),c}(r.PureComponent);function et(e){var t,n,r=(0,d.ZP)(),s=(0,_.kW)(),f=(0,c.Z)(),p=(0,g.Z)().id,y=(0,o.useDispatch)(),b=(0,l.SU)().viewType,v=(0,i.useLocation)(),m=(0,o.useSelector)(function(e){for(var t=e.resources.ShareSuggestionsTypeaheadResource,n={},r=0,o=Object.keys(t||{});r<o.length;r++){var i=o[r],s=t[i].data;s&&s.items&&(n[i]=s.items)}return n}),x=(0,o.useSelector)(function(e){return e.resources.ShareSuggestionsTypeaheadResource}),S=Object.keys(x||{}).some(function(e){return x[e].fetching}),j=(0,N.$)(),w=j.cachedShareSuggestions,P=j.clearCachedShareSuggestions,A=j.updateCachedShareSuggestions,z=(t=q(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.Z.create("ShareSuggestionsResource",{suggestion_type:"share",hide_group_conversations:!0}),e.prev=1,e.next=4,n.callGet();case 4:t=e.sent.resource_response.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),(0,O.nP)("mweb_share_menu_load_suggestions.fail.share",{sampleRate:1});case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(){return t.apply(this,arguments)}),k=(n=q(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P(),e.next=3,z();case 3:(t=e.sent)&&A(t);case 5:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,C.jsx)(ee,Y(Y({},e),{},{i18n:r,logContextEvent:f,users:s,searchContacts:function(e){(0,u.Z)(y((0,h.U)("ShareSuggestionsTypeaheadResource",e)),200)},fetching:S,userId:p||"",typeaheadSuggestions:m,cachedShareSuggestions:w,getFreshContactSuggestions:z,updateCachedContactsAfterSend:k,updateCachedShareSuggestions:A,viewType:b,location:v}))}},72566:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(76911),o=n(908390),i=n(515198);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=u(f);if(t){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return l(e)}(this,e)});function f(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f);for(var e,t,n,o,i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=l(e=r.call.apply(r,[this].concat(s))),n="setSearchRef",o=function(t){t&&(e.searchRef=t)},(n=d(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,e}return a(f.prototype,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.searchRef.focus()}},{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.id,r=e.onBlur,s=e.onChange,a=e.onFocus,c=e.placeholder,l=e.value;return(0,i.jsx)(o.Um,{accessibilityLabel:t,id:n,onBlur:r,onChange:s,onFocus:a,placeholder:c,ref:this.setSearchRef,size:"lg",value:l})}}]),n&&a(f,n),Object.defineProperty(f,"prototype",{writable:!1}),f}(r.Component)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/44970-5dffff0a160d38df.js.map