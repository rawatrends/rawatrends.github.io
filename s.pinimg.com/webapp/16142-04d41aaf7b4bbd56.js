"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[16142],{567450:function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function i(t,n,e){return(n=o(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}var a=new(function(){var t,n;function e(){!function(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,e),i(this,"onResumeListeners",[]),i(this,"onPauseListeners",[]),i(this,"inExp",!1),i(this,"windowInFocus",!0)}return t=[{key:"setExperiment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inExp=t}},{key:"onSessionResume",value:function(t){return this.onResumeListeners.push(t),this}},{key:"onSessionPause",value:function(t){return this.onPauseListeners.push(t),this}},{key:"removeResumeListener",value:function(t){this.onResumeListeners.filter(function(n){return n!==t})}},{key:"removePauseListener",value:function(t){this.onPauseListeners=this.onPauseListeners.filter(function(n){return n!==t})}},{key:"getAppState",value:function(){return this.windowInFocus?0:void 0}}],r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}()),c=function(t){if(t.isHidden){var n=t.reason;a.windowInFocus=!1,a.onPauseListeners.forEach(function(t){return t(n)})}else a.windowInFocus=!0,a.onResumeListeners.forEach(function(t){return t()})};setTimeout(function(){window.addEventListener("beforeunload",function(){return c({isHidden:!0,reason:"beforeunload"})}),window.addEventListener("focus",function(){return c({isHidden:!1})}),window.addEventListener("blur",function(){return c({isHidden:!0,reason:"blur"})}),window.addEventListener("pageshow",function(){return c({isHidden:!1})}),window.addEventListener("pagehide",function(){return c({isHidden:!0,reason:"pagehide"})}),void 0!==document.hidden?document.addEventListener("visibilitychange",function(){return c(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})},!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",function(){return c(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})},!1)},0),n.Z=a},42447:function(t,n,e){e.d(n,{Z:function(){return tT}});var r=e(76911),i=e(567450),o=e(226464),a=e(383434),c=e(790348),u=e(543059),s=e(437406),l=e(276602),p=e(638089),f=e(860273),d=e(453821),m=e(607150);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function g(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach(function(n){var r,i;r=n,i=e[n],(r=function(t){var n=function(t,n){if("object"!==y(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===y(n)?n:String(n)}(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var b=function(t){var n=t.constraintMap,e=t.initialNavTiming;return g(g(g(g({},t.annotations),(0,m.jh)("constraint_",n)),(0,m.jh)("mark_",(0,u.gQ)())),(0,m.jh)("browser_",g(g({},e?(0,m.D3)(e):{}),(0,m.rX)())))},h=e(505771),S=e(156381),T=e(358864);function w(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return A(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(t,n)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var O=function(t,n){var e=(0,S.v2)().firstInputDelay;return[].concat(w(t.map(function(t){return(0,h.Z)(t,n)}).filter(Boolean)),w(e?[{name:"fid",id:(0,T.Z)(),parentId:n,startTime:e.startTime,endTime:e.endTime,annotationMap:{},binaryAnnotationMap:{}}]:[]))},E=e(435851),I=e(67347);function P(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var M=function(t){var n=t.eventPrefix,e=t.endTime,r=t.tags,i=t.resourceArr,o=t.resourceType,a=void 0===o?"allResources":o,c=i.length;if(c>0&&"object"===C(i[0])&&!Array.isArray(i[0])){for(var u=P(i).sort(function(t,n){return t.fetchStart-n.fetchStart}),s=P(i).sort(function(t,n){return t.responseEnd-n.responseEnd}),l=1,p=e/5,f=0;l<=5;){for(var d=0;f<=c-1&&u[f].fetchStart<=p*l;)f+=1,d+=1;(0,I.S0)("".concat(n,".tags.").concat(a,".fetchStartInterval").concat(l,"of5"),d,{sampleRate:.2,tags:r}),(0,I.S0)("".concat(n,".").concat(a,".fetchStartInterval").concat(l,"of5"),d,{sampleRate:.2}),l+=1}var m={zeroPercentInFlight:u[0].fetchStart,twentyFivePercentInFlight:u[Math.floor(c/4)].fetchStart,fiftyPercentInFlight:u[2*Math.floor(c/4)].fetchStart,seventyFivePercentInFlight:u[3*Math.floor(c/4)].fetchStart,hundredPercentInFlight:u[c-1].fetchStart,twentyFivePercentComplete:s[Math.floor(c/4)].responseEnd,fiftyPercentComplete:s[2*Math.floor(c/4)].responseEnd,seventyFivePercentComplete:s[3*Math.floor(c/4)].responseEnd,hundredPercentComplete:s[c-1].responseEnd};for(var y in m)m[y]&&((0,I.LY)("".concat(n,".tags.").concat(a,".").concat(y),m[y],{sampleRate:.2,tags:r}),(0,I.LY)("".concat(n,".").concat(a,".").concat(y),m[y],{sampleRate:.2}))}},j=function(t){var n,e=t.annotateExperiments,r=t.endTime,i=t.entries,o=t.metricId,a=t.pwtStaticContext,c="".concat((0,E.Z)(a),".").concat(o.surface),u=[c];e&&e.forEach(function(t){var n=a.getExperimentGroup(t)||"null";u.push("".concat(c,".").concat(t,".").concat(n))});var s={lcpTimingBucket:((n=(0,S.Bn)())<=2500?"Good":n>2500&&n<=4e3?"Needs Improvement":"Poor")||"unknown",isAuthenticated:a.isAuthenticated,navigationType:o.navigationType},l=Array.from(i.filter(function(t){return"number"==typeof t.encodedBodySize&&t.encodedBodySize>=1e4&&t.responseEnd<=r})),p=[],f=[],d=[],m=[],y=[];l.forEach(function(t){"img"===t.initiatorType?p.push(t):"css"===t.initiatorType?f.push(t):"script"===t.initiatorType?d.push(t):"xmlhttprequest"===t.initiatorType?m.push(t):"link"===t.initiatorType&&t.name.includes("i.pinimg.com")&&y.push(t)}),u.forEach(function(t){M({eventPrefix:t,endTime:r,tags:s,resourceArr:l}),M({eventPrefix:t,endTime:r,tags:s,resourceArr:p,resourceType:"image"}),M({eventPrefix:t,endTime:r,tags:s,resourceArr:f,resourceType:"css"}),M({eventPrefix:t,endTime:r,tags:s,resourceArr:d,resourceType:"scripts"}),M({eventPrefix:t,endTime:r,tags:s,resourceArr:m,resourceType:"xhr"}),M({eventPrefix:t,endTime:r,tags:s,resourceArr:y,resourceType:"preloadedImage"})})},N=e(22773),L=function(t,n){var e=t.startTime,r=t.responseEnd;return e>n.endTime||!!r&&r<n.startTime},R=function(t){var n,e=t.annotateExperiments,r=t.annotations,i=t.binaryAnnotations,o=t.constraintMap,a=t.endTime,c=t.imageTimings,u=t.metricId,s=t.pwtStaticContext,l=t.startTime,m=t.traceId,y=t.spans,v=(0,N.Cg)();"initial_app_load"===u.navigationType&&(n=(0,f.Z)());var g=c.map(function(t){return t.name}),h=v.map(function(t){return(0,d.p)(t,g)}).filter(function(t){return!L(t.timing,{startTime:l,endTime:a})});return("board"===u.surface||"pin_closeup"===u.surface)&&j({annotateExperiments:e,endTime:a,entries:v,metricId:u,pwtStaticContext:s}),{type:"COMPLETE",traceId:m,startTime:l,endTime:a,spans:O(h,m).concat(y),annotationMap:b({constraintMap:o,initialNavTiming:n,annotations:r}),binaryAnnotationMap:(0,p.rA)({annotateExperiments:e,binaryAnnotations:i,entries:v,metricId:u,performanceResources:h,pwtEndTime:a,pwtStaticContext:s})}},x=!1,D=function(t,n){if(t&&n){if(!x)return x=!0,n;(0,c.H)("duplicated_initial_app_load_surface_pwt")}return(0,T.Z)()},H=e(558775),B=e(317672);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return z(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return z(t,n)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function U(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function G(t,n,e){var r;return(r=function(t,n){if("object"!==k(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"===k(r)?r:String(r))in t)?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var F=function(t){var n=performance.getEntriesByType("resource").filter(function(t){return t.name.includes("i.pinimg")}).reduce(function(t,n){var e=n.name.replace(".jpg","").split("/");return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?U(Object(e),!0).forEach(function(n){G(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):U(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}(G({},e[e.length-1],{downloadSize:n.name.split("/")[3].split("x")[0]}),t)},{}),e=Array.from(document.getElementsByTagName("img")).map(function(t){var e=t.src.replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]){var i,o=(null===(i=(0,B.rZ)(t))||void 0===i?void 0:i.width)||1,a=n[r].downloadSize;return{fileName:r,renderedSize:o,downloadedSize:a,ratio:a/o}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),r=Array.from(document.querySelectorAll('div[role="img"]')).map(function(t){var e=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]&&t instanceof HTMLDivElement){var i,o=(null===(i=(0,B.rZ)(t))||void 0===i?void 0:i.width)||1,a=n[r].downloadSize;return{fileName:r,renderedSize:o,downloadedSize:a,ratio:a/o}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}});[].concat(Z(e),Z(r)).forEach(function(n){var e=n.ratio,r=n.fileName,i=n.downloadedSize;n.ratio>1.05&&(0,c.A9)("checkImageRatio.".concat(t),{count:Math.round(10*e)/10,tags:{fileName:"".concat(i,"_").concat(r)}})})},K=e(985271),W=e(780280),V=function(t,n){var e=(0,r.useRef)(n);return{getState:function(){return e.current},dispatch:function(n){e.current=t(e.current,n)}}},J=e(314880),Y=e(515198),$=["children"];function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)e=o[r],!(n.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}function Q(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return tt(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return tt(t,n)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function tn(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function te(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?tn(Object(e),!0).forEach(function(n){tr(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):tn(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function tr(t,n,e){return(n=ti(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function ti(t){var n=function(t,n){if("object"!==q(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===q(n)?n:String(n)}var to=["initial_app_load","client_route_push"],ta=(0,a.XV)("PwtSurface"),tc="NavigationComplete",tu="VisuallyComplete",ts=function(t,n){t.isSampled&&(0,H.Z)({metricId:t.metricConfig.metricId,pwtStaticContext:t.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:n}})},tl=function(t,n,e){var r,i=t.metricConfig,a=i.metricId,s=i.pwtStaticContext,l=i.annotateExperiments,p=t.annotations,f=t.binaryAnnotations,d=t.constraintMap,m=t.startTime,y=t.imageTimings,v=t.isSampled,g=t.spans;(0,u.L8)("PWT_Complete_".concat((0,o.KJ)(a)));var b=D("initial_app_load"===a.navigationType,null===(r=s.serverData)||void 0===r?void 0:r.trace_id),h=R({annotateExperiments:l,annotations:p,binaryAnnotations:f,constraintMap:d,endTime:n,imageTimings:y,metricId:a,pwtStaticContext:s,startTime:m,traceId:b,spans:g});v&&!e&&(0,H.Z)({metricId:a,pwtStaticContext:s,result:h});try{F(String(h.binaryAnnotationMap["metricId.surface"].value))}catch(t){(0,c.H)("image_ratio_check_error",{error:t})}return te(te({},t),{},{result:h,status:"DONE"})},tp=function(t,n){if(t.metricConfig.constraints.every(function(n){return t.constraintMap[n]})){var e=Math.max.apply(Math,Q(t.metricConfig.constraints.map(function(n){return t.constraintMap[n]})));return tl(t,e,n)}return t},tf=function(t,n){var e=n.constraint,r=n.time,i=n.disablePWTLogging,a=(0,o.KJ)(t.metricConfig.metricId);return K.Z?t.metricConfig.constraints.find(function(t){return t===e})?t.constraintMap[e]?(ta('constraint "'.concat(e,'" is already complete.')),(0,c.H)("duplicated_constraint_complete",{constraint:e,action:a}),t):(ta('marking constraint "'.concat(e,'" as complete')),(0,u.ZP)("constraint_".concat(e,"_is_complete")),tp(te(te({},t),{},{constraintMap:te(te({},t.constraintMap),{},tr({},e,r||K.Z.now()))}),i)):(ta('marked constraint "'.concat(e,'" is not a required constraint.')),t):((0,c.H)("missing_window_performance",{action:a}),t)},td=function(t,n){if(!K.Z){var e=(0,o.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}ta('removing constraint "'.concat(n,'"'));var r=t.metricConfig.constraints.filter(function(t){return t!==n}),i=t.constraintMap,a=(i[n],X(i,[n].map(ti)));return tp(te(te({},t),{},{constraintMap:a,metricConfig:te(te({},t.metricConfig),{},{constraints:r})}))},tm=function(t,n){if(!K.Z){var e=(0,o.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}ta('updating pwt segment to "'.concat(n,'"'));var r=te(te({},t.metricConfig.metricId),{},{segment:n});return te(te({},t),{},{metricConfig:te(te({},t.metricConfig),{},{metricId:r})})},ty=function(t,n){var e,r,i,a,u=n.metricConfig,s=n.startTime,l=n.isSampled,p=n.disablePWTLogging;if(p||"TIMING"!==t.status||s===t.startTime||ts(t,"routeUpdatedOnSameSurface"),!u)return{status:"DISABLED",metricConfig:null};var f=(0,o.KJ)(u.metricId);return"TIMING"===t.status&&t.startTime===s&&t.constraintMap[tc]?((0,c.H)("duplicated_init_route_action",{action:f}),t):(p||("Other"===u.pwtStaticContext.browserName&&!1===u.metricId.isAuthenticated&&"initial_app_load"===u.metricId.navigationType?((0,c.A9)("TIMING.".concat(f),{tags:{userAgent:null===(e=window)||void 0===e?void 0:null===(r=e.navigator)||void 0===r?void 0:r.userAgent}}),(0,c.A9)("TIMING.sampled.".concat(f),{tags:{userAgent:null===(i=window)||void 0===i?void 0:null===(a=i.navigator)||void 0===a?void 0:a.userAgent},sampleRate:.5})):((0,c.A9)("TIMING.".concat(f)),(0,c.A9)("TIMING.sampled.".concat(f),{sampleRate:.5}))),tf({status:"TIMING",metricConfig:u,startTime:s,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:l,spans:[]},{constraint:tc,disablePWTLogging:p}))},tv=function(t,n){if(ta("dispatch action",n),"INIT_ROUTE"===n.type)return ty(t,n.payload);if("TIMING"!==t.status)return ta("ignoring action due to invalid state ".concat(t.status),n),t;switch(n.type){case"ABORT":ts(t,n.reason);var e={type:"ABORT",reason:n.reason};return te(te({},t),{},{status:"DONE",result:e});case"ANNOTATE":var r=n.payload.name;if(!K.Z)return t;var i=K.Z.now();return ta("adding annotation {".concat(r,": ").concat(i,"}")),te(te({},t),{},{annotations:te(te({},t.annotations),tr({},r,i))});case"BINARY_ANNOTATE":var a=n.payload,u=a.name,s=a.value,l=a.annotationType;return ta("adding binary annotation {".concat(u,": ").concat(s,"}")),te(te({},t),{},{binaryAnnotations:te(te({},t.binaryAnnotations),tr({},u,{value:s,type:l}))});case"MARK_CONSTRAINT_COMPLETE":return tf(t,n.payload);case"REMOVE_CONSTRAINT":return td(t,n.payload);case"SET_SEGMENT":return tm(t,n.payload);case"SET_VISUALLY_COMPLETE_RESULT":var p=n.payload.imageTimings;if(0===p.length)return ts(t,"visuallyComplete_noImages"),te(te({},t),{},{status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}});var f=Math.max.apply(Math,Q(p.map(function(t){return t.responseEnd||0})));return tf(te(te({},t),{},{imageTimings:p}),{constraint:tu,time:f});case"ADD_SUBSPAN":var d=t.startTime,m=n.payload,y=m.name,v=m.startTime,g=m.endTime,b=m.annotations,h=m.binaryAnnotations,S=m.parentId;return te(te({},t),{},{spans:[].concat(Q(t.spans),[{name:y,id:(0,T.Z)(),startTime:v||d,endTime:g,annotationMap:te({},b),binaryAnnotationMap:te({},h),parentId:S}])});case"START_SUBSPAN":return te(te({},t),{},{spans:[].concat(Q(t.spans),[{name:n.payload.name,id:(0,T.Z)(),startTime:K.Z?K.Z.now():0,endTime:1/0,annotationMap:te({},n.payload.annotations),binaryAnnotationMap:te({},n.payload.binaryAnnotations),parentId:n.payload.parentId}])});case"STOP_SUBSPAN":var w=t.spans.findIndex(function(t){return t.name===n.payload.name});return w>-1?(t.spans[w].endTime=K.Z?K.Z.now():0,n.payload.annotations&&(t.spans[w].annotationMap=te(te({},t.spans[w].annotationMap),n.payload.annotations)),n.payload.binaryAnnotations&&(t.spans[w].binaryAnnotationMap=te(te({},t.spans[w].binaryAnnotationMap),n.payload.binaryAnnotations))):(0,c.H)("invalid_subspan_stop_name",{name:n.payload.name}),t;default:var A=(0,o.KJ)(t.metricConfig.metricId);return(0,c.H)("invalid_pwt_surface_action",{action:A}),t}},tg=function(t){if(!t)return"initial_app_load";switch(t.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},tb=new Set,th=function(t){var n=t.surface,e=t.constraints,o=t.segment,a=t.measureGridVisuallyComplete,c=t.annotateExperiments,u=t.customEnabledNavigationTypes,l=t.navigationInfo,p=l.clientNavigation,f=l.navigationType,d=t.sampleRate,m=(0,r.useRef)("NOT_SET"),y=(0,s.N5)(),v=V(tv,{status:"DISABLED",metricConfig:null}),g=v.getState,b=v.dispatch,h=(0,W.B)();if(m.current!==p&&(m.current=p,y)){var S=y.isAuthenticated,T=n&&f&&(u||to).includes(f)?{metricId:{type:"surface",surface:n,navigationType:f,isAuthenticated:S,segment:o},annotateExperiments:c,constraints:[tc].concat(Q(e||[]),Q(a?[tu]:[])),pwtStaticContext:y}:null;(0,I.nP)("webapp.pwt_surface.init_route",{tags:{surface:n,navigationType:f,isAuthenticated:S}});var w=!tb.has(p);b({type:"INIT_ROUTE",payload:{metricConfig:T,startTime:p?p.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!w}}),w&&tb.add(p)}var A=g();if((0,r.useEffect)(function(){return function(){tb.delete(p)}},[p]),(0,r.useEffect)(function(){var t=function(t){b({type:"ABORT",reason:t})};i.Z.onSessionPause(t);var n=window.innerHeight,e=window.innerWidth,r=function t(){var r,i,o,a=Math.abs(window.innerHeight-n),c=Math.abs(window.innerWidth-e),u=window.innerHeight!==n,s=window.innerWidth!==e,l={handler:(0,J.H)(),deviceType:null!==(r=null==y?void 0:y.deviceType)&&void 0!==r?r:"unknown",isAuthenticated:null!==(i=null==y?void 0:y.isAuthenticated)&&void 0!==i?i:"unknown",platform:null!==(o=h.userAgent.platform)&&void 0!==o?o:"unknown"};if((0,I.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:te(te({},l),{},{heightChanged:u,widthChanged:s})}),u&&(0,I.S0)("webapp.PwtLogger.resizeHeightDelta",a,{sampleRate:1,tags:l}),s&&(0,I.S0)("webapp.PwtLogger.resizeWidthDelta",c,{sampleRate:1,tags:l}),window.removeEventListener("resize",t),(null==y?void 0:y.deviceType)==="phone"&&(!s&&u&&a<=150||!u&&!s)||(null==y?void 0:y.deviceType)==="desktop"&&!u&&!s){(0,I.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:te(te({},l),{},{heightChanged:u,widthChanged:s})});return}b({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),function(){var n=g();ta("handling unmount",n),"TIMING"===n.status&&ts(n,"unmount"),i.Z.removePauseListener(t),window.removeEventListener("resize",r)}},[]),"TIMING"!==A.status||!A.constraintMap[tc])return{state:A,context:null};var O=A.startTime,E=A.metricConfig;return{state:A,context:{abort:function(t){return b({type:"ABORT",reason:t})},addAnnotation:function(t){return b({type:"ANNOTATE",payload:{name:t}})},addBinaryAnnotation:function(t,n,e){return b({type:"BINARY_ANNOTATE",payload:{name:t,value:n,annotationType:e}})},addSubspan:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return b({type:"ADD_SUBSPAN",payload:{name:t,startTime:n,endTime:e,annotations:r,binaryAnnotations:i,parentId:o}})},getId:function(){return O},getMetricId:function(){return E.metricId},markConstraintComplete:function(t){return b({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:t,time:K.Z?K.Z.now():0}})},removeConstraint:function(t){return b({type:"REMOVE_CONSTRAINT",payload:t})},setSegment:function(t){return b({type:"SET_SEGMENT",payload:t})},setVisuallyCompleteResult:E.constraints.includes(tu)?function(t){return b({type:"SET_VISUALLY_COMPLETE_RESULT",payload:t})}:null,startSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"START_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})},stopSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"STOP_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})}}}},tS=function(){var t=(0,l.E)(),n=!!t;(0,r.useEffect)(function(){if(n){var e=null==t?void 0:t.getMetricId(),r=e?(0,o.KJ)(e):null;(0,c.H)("nested_pwt_surface",{action:r})}},[n])};function tT(t){var n,e=t.children,r=X(t,$),i=(0,s.fM)(),o=tg(i),a=Q(null!==(n=r.annotateExperiments)&&void 0!==n?n:[]),c=th(te(te({},r),{},{annotateExperiments:a,navigationInfo:{navigationType:o,clientNavigation:i}})).context;return tS(),(0,Y.jsx)(l.S,{value:c,children:e})}},311560:function(t,n){n.Z=function(t){switch(t){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";default:return"OTHER"}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16142-04d41aaf7b4bbd56.js.map