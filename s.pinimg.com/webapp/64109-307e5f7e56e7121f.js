"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[64109],{612289:function(e){var t,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="c5e34729d91812fdf0f426c5f40a521b",e.exports=n},390687:function(e){var t,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:t,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="69ffcdea57a7778d2ebbcd41c276c0d0",e.exports=n},172335:function(e){var t,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="b3ec14d29962e56f80dd52e7e6d7a6d9",e.exports=n},664326:function(e){var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[{alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"}],type:"Pin",abstractKey:null};t.hash="635c1385df17f38c55bc684f8c450e0e",e.exports=t},893831:function(e){var t,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t],storageKey:null}],type:"Pin",abstractKey:null};n.hash="1612c2df94f42990b3d4f6ccede72a70",e.exports=n},592657:function(e){var t,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="0588c16f43d378c21df320420e52c9eb",e.exports=n},366284:function(e,t,n){n.d(t,{G6:function(){return o},i7:function(){return a},oi:function(){return r},u$:function(){return i},un:function(){return l},vU:function(){return s}});var r=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),i=function(e){return e?e.includes("Chrome")?r.CHROME:e.includes("Safari")?r.SAFARI:e.includes("Firefox")?r.FIREFOX:e.includes("Opera")?r.OPERA:e.includes("IE")?r.IE:e.includes("Edge")?r.EDGE:r.OTHER:r.OTHER};function o(e){return i(e)===r.SAFARI}function a(e){return i(e)===r.CHROME}function s(e){return i(e)===r.FIREFOX}function l(e){return i(e)===r.EDGE}},768559:function(e,t,n){var r=n(826067),i=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,o=function(e,t){return t?e.substring(t.length).split("/")[0]:e},a=function(e){var t,n=e.boardUrl,a=e.path,s=e.pinId,l=e.pinnerUserName,c=e.query,d=e.search,u=e.storyPinDataId;if(!a)return"";switch(a){case"/":case"/homefeed/":return"UserHomefeedResource";case l&&"/".concat(l,"/pins/"):return"UserPinsResource";case l&&"/".concat(l,"/"):case/\/_activity\//.test(a)&&a:return"UserActivityPinsResource";case/\/_created\//.test(a)&&a:return u?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(a)&&a:return"UserDiscoveredPinsResource";case/\/_saved\//.test(a)&&a:return"BoardlessPinsResource";case l&&"/".concat(l,"/_shopping_list/"):return"ShoppingListFeedResource";case/\/visual-search\//.test(a)&&a:return"VisualLiveSearchResource";case/\/pin\//.test(a)&&a:var p=o(a,"/pin/");if(s!==p)return"RelatedPinFeedResource_".concat(p);break;case/\/search\//.test(a)&&a:if(d){var f=(0,r.mB)(d,{shouldDecode:!1}).q||"";return"SearchResource_".concat(f.toLowerCase())}if(c)return"SearchResource_".concat(encodeURIComponent(c.q||"").toLowerCase());break;case/\/categories\//.test(a)&&a:var h=o(a,"/categories/");return"CategoryFeedResource_".concat(h);case/\/discover\/topics\//.test(a)&&a:return"CategoryFeedResource";case/\/news_hub\//.test(a)&&a:var _=o(a,"/news_hub/");return"NewsHubDetailsResource_".concat(_);case/\/_tools\/more-ideas\//.test(a)&&a:return"BoardContentRecommendationResource";case/\/topics\//.test(a)&&a:var m=o(a,"/topics/");return"TopicFeedResource_".concat(m);case/\/source\//.test(a)&&a:var g=o(a,"/source/");return"DomainFeedResource_".concat(g);case/\/explore\//.test(a)&&a:var y=o(a,"/explore/");return"SearchResource_".concat(y);case n:case!!n&&/\/more_ideas\//.test(a)&&a:return"BoardFeedResource";case n&&a.indexOf(n)>-1&&a:return"BoardSectionPinsResource";case/\/brand_catalog\//.test(a)&&a:return"BrandCatalogFeedResource";case i.test(a)&&a:var b=(null===(t=a.match(i))||void 0===t?void 0:t[2])||"unknown";return"TodayArticleFeedResource_".concat(b);case/\/today\//.test(a):return"TodayTabResource";case/\story_feed\//.test(a)&&a:if(d){var v=(0,r.mB)(d),P=v.feed_type,x=v.request_params;return"StoryFeedResource_".concat(P,"_").concat(x)}}return""},s=function(e){var t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""};t.Z=function(e){var t,n,r=e.boardUrl,i=e.location,o=e.pinId,l=e.pinnerUserName,c=e.previousHistory,d=e.storyPinDataId,u=e.trackingParams,p=e.trackingParamsMap,f=void 0===p?{}:p;if(o&&u&&i){if(!f)return"".concat(null!=u?u:"","~0");var h=i.pathname,_=i.search,m=i.query,g=a({boardUrl:r,path:h,pinId:o,pinnerUserName:l,query:m,search:_,storyPinDataId:d,trackingParams:u,trackingParamsMap:f}),y=Object.keys(f);if((h||"").startsWith("/pin/")){var b=y.find(function(e){return"PinResource"!==e});t=b?f[b]:f.PinResource}else t=f[g];return!t&&c&&c.length&&(n=a({boardUrl:r,path:s(c[c.length-1].location),pinId:o,pinnerUserName:l,query:m,search:_,storyPinDataId:d,trackingParams:u,trackingParamsMap:f}),t=f[n]),t||(t="".concat(u||"","~0")),t}}},166300:function(e,t,n){var r=n(908390),i=n(444445),o=n(134879),a=n(50286),s=n(515198);t.Z=function(e){var t=e.children,n=e.roundedForLargeDevice,l="phone"!==(0,a.ZP)()&&n;return(0,o.V)()?(0,s.jsx)(r.xu,{marginStart:-i.D6,marginEnd:-i.D6,rounding:l?6:void 0,overflow:l?"hidden":void 0,children:(0,s.jsx)(o.C,{value:!1,children:t})}):t}},176843:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n;if(e.error){var r=e.error,i=r.httpStatus,o=r.api_error_code,a=r.redirectUrl;(404===i||401===i&&7===o)&&(n={pathname:t?"/ideas/":"/",state:{showError:!0}}),301===i&&a&&(n={pathname:a})}return n}},989726:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(599689),i=n(53987),o=n(176843),a=n(784590),s=n(19121);function l(e){var t=(0,r.useHistory)(),n=(0,r.useLocation)(),l=!(0,s.Z)().isAuth&&(0,i.L6)(n),c=(0,a.Z)(e),d=(0,o.Z)(c,l);return d&&t.replace(d.pathname,d.state),c}},508847:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(567831),i=function(e){var t=e.url,n=(0,r.Z)("/");return 0===t.lastIndexOf(n,0)?t.substr(n.length-1):t}},63552:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(908390),i=n(515198);function o(e){var t=e.children,n=e.onMouseEnter,o=e.onMouseLeave,a=e.onTouch,s=e.rounding,l=e.fullWidth,c=e.pressState,d=void 0===c?"none":c,u=e.accessibilityLabel,p=e.role,f=(Array.isArray(d)?d:[d]).includes("compress");return(0,i.jsx)(r.iP,{fullWidth:void 0!==l&&l,onMouseEnter:n&&function(e){return n(e.event)},onMouseLeave:o&&function(e){return o(e.event)},onTap:a&&function(e){return a(e.event)},rounding:s,tapStyle:f?"compress":"none",accessibilityLabel:u,role:p,children:t})}},497307:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(908390),i=n(898781),o=n(313047),a=n(542554),s=n(734226),l=n(404508),c=n(515198);function d(e){var t=(0,i.ZP)(),n=e.backButtonIcon,d=e.name,u=e.onNextButtonTouch,p=e.onNameChange,f=e.selectedPinIds,h=void 0===f?[]:f,_=e.useRoundedCorners,m=h.length>0?130:64;return(0,c.jsxs)(a.default,{hasFixedHeader:!0,children:[(0,c.jsxs)(o.FixedHeader,{height:m,paddingY:3,useRoundedCorners:_,children:[(0,c.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(l.Z,{color:"darkGray",icon:n||"cancel",padding:3,size:"sm"}),(0,c.jsx)(r.X6,{accessibilityLevel:1,size:"300",children:t._('Add section', 'for add board section page', 'for add board section page')}),(0,c.jsx)(r.xu,{"data-test-id":"create-section-button",children:(0,c.jsx)(r.zx,{accessibilityLabel:t._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),onClick:u,disabled:""===d.trim(),color:"red",size:"lg",text:t._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),h&&(0,c.jsx)(s.Z,{selectedPinIds:h})]}),(0,c.jsx)(r.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,c.jsx)(r.nv,{id:"section-name-input",label:t._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:function(e){return p(e.event)},size:"lg",value:d})})]})}},478540:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(506979),i=n(908390),o=n(898781),a=n(989726),s=n(19121),l=n(290943),c=n(384833),d=n(188170),u=n(515198),p=function(){var e=(0,s.Z)().id;return(0,a.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),(0,r.useSelector)(function(e){return(0,c.Z)(e)||[]})};function f(e){var t=e.excludeBoardId,n=e.onRepinToBoard,r=(0,o.ZP)(),a=p();return a.length>0&&(0,u.jsxs)(i.xu,{children:[(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(i.xv,{children:r._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"".concat(l.T,"px")}},paddingY:3,children:a.filter(function(e){return e.id!==t}).map(function(e){return(0,u.jsx)(d.Z,{boardId:e.id,onBoardSelected:function(){return n(e)}},e.id)})})]})}},676802:function(e,t,n){n.d(t,{Wx:function(){return R}});var r=n(76911),i=n(506979),o=n(599689),a=n(908390),s=n(499128),l=n(898781),c=n(313047),d=n(542554),u=n(343341),p=n(290943),f=n(478540),h=n(734226),_=n(63552),m=n(678638),g=n(404508),y=n(568674),b=n(515198);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){j(o,r,i,a,s,"next",e)}function s(e){j(o,r,i,a,s,"throw",e)}a(void 0)})}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function O(e,t,n){return e?n._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):t?n._('Saved to section!', ' - ', ' -- '):n._('Saved to board!', ' - ', ' -- ')}function R(e){var t=e.onAddNewSection,n=e.useIconWithBackground,r=(0,l.ZP)();return(0,b.jsx)(c.FixedFooter,{height:n?p.y:p.T,alignCenter:n,children:(0,b.jsx)(_.Z,{onTouch:t,pressState:"none",children:(0,b.jsxs)(a.xu,{display:"flex",alignItems:"center",padding:n?0:1,"data-test-id":"addSectionButton",children:[n?(0,b.jsx)(a.xu,{color:"secondary",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,b.jsx)(a.JO,{icon:"add",color:"default",size:20,accessibilityLabel:r._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button')})}):(0,b.jsx)(a.JO,{icon:"add-circle",color:"error",size:38,accessibilityLabel:r._('Add section button', ' - ', ' -- ')}),n?(0,b.jsx)(a.xu,{marginStart:2,children:(0,b.jsx)(a.xv,{size:"400",weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,b.jsx)(a.xu,{marginStart:3,children:(0,b.jsx)(a.xv,{weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(o,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=A(o);if(t){var r=A(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return k(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return B(k(e=i.call.apply(i,[this].concat(n))),"onRepinToBoard",function(t){t.section_count?e.props.onRepinToBoardWithSections(t):e.props.repinToOtherBoard(t.id,e.props.i18n)}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.boardId,n=e.boardSectionId,r=e.orginalBoardId,i=e.onAddNewSection,o=e.repin,s=e.hideBoardPickerRow,l=e.selectedPinIds,u=e.isCollaborative,p=r===t;return(0,b.jsxs)(d.default,{hasFixedHeader:!0,children:[(0,b.jsxs)(c.FixedHeader,{hasBorder:!0,height:140,children:[(0,b.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(a.xu,{column:2,children:(0,b.jsx)(g.Z,{})}),(0,b.jsx)(a.xu,{column:8,children:(0,b.jsx)(a.X6,{align:"center",accessibilityLevel:1,size:"300",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,b.jsx)(a.xu,{column:2})]}),(0,b.jsx)(h.Z,{selectedPinIds:l})]}),t&&(0,b.jsx)(y.Z,{boardId:t,repin:o,originalBoardId:r,hideBoardPickerRow:p&&s,sectionId:n}),p&&(0,b.jsxs)(a.xu,{children:[!u&&(0,b.jsx)(f.Z,{excludeBoardId:t,onRepinToBoard:this.onRepinToBoard}),(0,b.jsx)(R,{onAddNewSection:i})]})]})}}],w(o.prototype,n),r&&w(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.PureComponent);t.ZP=function(e){var t,n,r=e.inSelectAll,a=e.pinIds,c=e.orginalBoardId,d=e.boardSectionId,p=e.onRefreshBoardSection,f=e.url,h=(0,u.F9)().showToast,_=(0,l.ZP)(),g=(0,o.useHistory)(),y=(0,i.useDispatch)(),v=(t=S(regeneratorRuntime.mark(function e(t,n,i){var o,l,u,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n&&n.id,l={boardId:c,sectionId:d},u={boardId:t,sectionId:o},_=r?(0,m.X_)({source:l,target:u,excludePinIds:a}):(0,m.Kw)({source:l,target:u,pinIds:a}),!(c!==t)){e.next=10;break}return e.next=7,y(_);case 7:g.push({pathname:f}),e.next=15;break;case 10:return e.next=12,y(_);case 12:if(!p){e.next=15;break}return e.next=15,p();case 15:h(function(e){var t=e.hideToast;return(0,b.jsx)(s.ZP,{text:O(r,o,i),onHide:t})});case 16:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),P=(n=S(regeneratorRuntime.mark(function e(t,n){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={boardId:c,sectionId:d},o={boardId:t,sectionId:void 0},h(function(e){var t=e.hideToast;return(0,b.jsx)(s.ZP,{text:O(r,void 0,n),onHide:t})}),e.next=5,y(r?(0,m.X_)({source:i,target:o,excludePinIds:a}):(0,m.Kw)({source:i,target:o,pinIds:a}));case 5:g.go(-2);case 6:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});return(0,b.jsx)(E,x(x({},e),{},{i18n:_,repin:v,repinToOtherBoard:P}))}},734226:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(76911),i=n(908390),o=n(898781),a=n(350118),s=n(515198);function l(e){var t=e.selectedPinIds,n=(0,o.ZP)(),l=(0,r.useRef)(),c=(0,a.AF)(),d=(t||[]).map(function(e){return c[e]}).filter(Boolean);(0,r.useEffect)(function(){var e=l.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[d]);var u=d.map(function(e,t){var r,o,a,l,c=e.description,d=e.images,u=null==d?void 0:d["236x"];return(0,s.jsx)(i.xu,{marginEnd:1,children:(0,s.jsx)(i.zd,{rounding:2,wash:!0,width:50,height:65,children:(0,s.jsx)(i.Ee,{alt:!!(null!=c&&c.trim())&&(null==c?void 0:c.trim())||n._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:null!==(r=e.dominant_color)&&void 0!==r?r:"",naturalHeight:null!==(o=null==u?void 0:u.height)&&void 0!==o?o:1,naturalWidth:null!==(a=null==u?void 0:u.width)&&void 0!==a?a:1,src:null!==(l=null==u?void 0:u.url)&&void 0!==l?l:"",fit:"contain"})})},t)});return(0,s.jsx)(i.xu,{display:"flex",overflow:"scroll",marginTop:2,ref:l,children:u})}},290943:function(e,t,n){n.d(t,{T:function(){return r},y:function(){return i}});var r=70,i=80},881802:function(e,t,n){n.d(t,{Bb:function(){return m},Bx:function(){return l},F4:function(){return s},OG:function(){return o},Qj:function(){return c},_6:function(){return _},gv:function(){return a},hg:function(){return d},is:function(){return f},jP:function(){return h},lt:function(){return i},oM:function(){return u},wI:function(){return p}});var r=n(826067),i=function(e){return e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal')},o=function(e){return e.pathname},a=function(e){var t=e.firstName,n=e.i18n;return t?(n._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",t):n._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board')},s=function(e){var t=(0,r.mB)(e.search).board_url;if(t){var n=(0,r.Jx)(t),i=(0,r.XP)({accept_invite:!0,seamless:!0});return n.includes("?")?"".concat(n,"&").concat(i):"".concat(n,"?").concat(i)}return e.pathname},l=function(e){return e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.')},c=function(e){var t=e.pathname;if(t.startsWith("/pin/")){var n=t.split("/");if(n.length>2)return"/".concat(n[1],"/").concat(n[2],"/repin/")}return t},d=function(e){return e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.')},u=function(e){return e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.')},p=function(e){var t=e.pathname;if(t.startsWith("/pin/")){var n=t.split("/");if(n.length>2)return"/".concat(n[1],"/").concat(n[2],"/edit/")}return t},f=function(e){return e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},h=function(e){return e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.')},_=function(e){return e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.')},m=function(e){return e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')}},149823:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(898781),i=n(881802),o=n(987318),a=n(515198);function s(e){var t=e.children,n=e.callbackFunction,s=e.modalHeader,l=e.nextLocation,c=(0,r.ZP)(),d=(0,o.H)(),u=d.viewer,p=d.loginForMore,f=d.limitedLoginModalSubheader,h=d.limitedLoginModalNextLocation,_="LIMITED_LOGIN"===u.type;return(0,a.jsx)("div",{onClickCapture:function(e){_&&(n&&n(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),null==p||p.setVisible(!0),null==f||f.setText(s||(0,i.lt)(c)),l&&(null==h||h.setRoute(l)))},children:t})}},160865:function(e,t,n){n.d(t,{Z:function(){return tA}});var r,i,o,a,s,l,c=n(76911),d=n(506979),u=n(599689),p=n(908390),f=n(112690),h=n(332611),_=n(121151),m=n(968121),g=n(499128),y=n(898781),b=n(349700),v=n(995081),P=n(313047),x=n(542554),j=n(784590),S=n(989726),w=n(50286),I=n(19121),k=n(676802),A=n(427806),B=n(830157);function T(e,t){return!!(e&&e.placement_id&&e.experience_id===t)}var O=n(881802),R=n(149823),E=n(620707),C=n(515198);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z="cubic-bezier(0.66, 0.025, 0.33, 0.975)",L=(0,E.qe)(function(e,t,n,r,i){var o=e,a=t,s=0,l=0,c="",d=Math.floor(t/3);if("shrinkToPin"===n&&(s="24px",l=1,o=Math.floor(3*d/2),a=d),"pinToGrid"===n&&r&&i){var u=r.getBoundingClientRect(),p=i.getBoundingClientRect(),f=p.x+p.width/2-(u.x+u.width/2),h=p.y+p.height/2-(u.y+u.height/2);c="translate(".concat(f,"px, ").concat(h,"px)"),s="24px 0px 0px 24px",l=1,o=d,a=d}return{borderRadius:s,height:o,opacity:l,overflow:"hidden",width:a,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:"all .42s ".concat(Z),transition:"all .42s ".concat(Z)}}),D=(0,E.qe)(function(e){return{opacity:e?1:0,WebkitTransition:"opacity .42s ".concat(Z),transition:"opacity .42s ".concat(Z)}}),M=(0,E.qe)(function(e){return{opacity:e?0:1,WebkitTransition:"all .25s ".concat(Z),transition:"all .25s ".concat(Z),zIndex:3}});function H(e){var t,n,r,i,o=e.completeExperience,a=e.pinDominantColor,s=e.pinImageHeight,l=e.pinImageWidth,d=e.pinImageUrl,u=(0,y.ZP)(),f=F((0,c.useState)("visible"),2),h=f[0],_=f[1],m=F((0,c.useState)("none"),2),g=m[0],b=m[1],v=window.innerWidth,P=v*(s/l),x=Math.floor(v/3),j=Math.floor(v/6);(0,c.useEffect)(function(){d&&"none"===g&&(t=setTimeout(function(){b("shrinkToPin")},85)),d&&"shrinkToPin"===g&&(n=setTimeout(function(){b("pinToGrid")},2e3)),"pinToGrid"===g&&"visible"===h&&(r=setTimeout(function(){_("hidden")},2e3)),"hidden"===h&&(i=setTimeout(function(){_("none"),o()},300))}),(0,c.useEffect)(function(){return function(){clearTimeout(t),clearTimeout(n),clearTimeout(r),clearTimeout(i)}},[]);var S=(0,c.useRef)(null),w=(0,c.useRef)(null);return(0,C.jsxs)(p.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:M("hidden"===h)},direction:"column",display:"none"===h?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,C.jsxs)(p.xu,{height:v/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,C.jsx)(p.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:D("pinToGrid"===g)},children:(0,C.jsx)(p.zd,{rounding:6,width:x+j+1,height:x,children:(0,C.jsxs)(p.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,C.jsx)(p.xu,{width:x,height:x,color:"transparent",ref:w}),(0,C.jsxs)(p.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,C.jsx)(p.xu,{width:j,height:j,color:"secondary"}),(0,C.jsx)(p.xu,{width:j,height:j,color:"secondary"})]})]})})}),(0,C.jsx)(p.xu,{ref:S,position:"absolute",dangerouslySetInlineStyle:{__style:L(P,v,g,S.current,w.current)},children:(0,C.jsx)(p.Ee,{alt:u._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:d,fit:"cover",naturalHeight:s,naturalWidth:l,color:a})})]}),(0,C.jsx)(p.xu,{marginTop:8,marginBottom:8,paddingX:12,children:(0,C.jsx)(p.X6,{align:"center",size:"500",children:u._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var N=n(56632),K=n(327212);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===W(t)?t:String(t)}var J=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],$=function(e,t){return Math.random()*((e||1)-(t||0))+(t||0)},Q=function(e){return e*(Math.PI/180)},ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=G(i);if(t){var r=G(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return q(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return X(q(e=r.call.apply(r,[this].concat(n))),"animationTimer",null),X(q(e),"canvasRemovalTimer",null),X(q(e),"childrenContainerRef",(0,c.createRef)()),X(q(e),"containerRef",(0,c.createRef)()),X(q(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var t=window.innerWidth,n=e.containerRef.current.getBoundingClientRect(),r=n.height,i=n.top,o=document.createElement("canvas");return o.style.position="absolute",o.style.left="0px",o.style.top="".concat(i-(t-r)/2,"px"),o.style.pointerEvents="none",o.style.width="".concat(t,"px"),o.style.height="".concat(t,"px"),o.width=t,o.height=t,o}),X(q(e),"explode",function(){var t=e.buildCanvas();if(t){var n=e.containerRef.current,r=e.childrenContainerRef.current,i=t.getContext("2d");null==n||n.insertBefore(t,r),function e(t,n,r,i){window.requestAnimationFrame(function(){return e(t,n,r,i)}),n.clearRect(0,0,r,i),t.forEach(function(e){e.x+=e.speed*Math.cos(Q(e.degree)),e.y+=e.speed*Math.sin(Q(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(n.beginPath(),n.globalAlpha=e.opacity,n.fillStyle=e.color,n.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),n.fill())})}(Array.from(Array(120)).map(function(){return{x:t.width/2,y:t.height/2,radius:Math.round($(10,30)),color:J[Math.floor(Math.random()*J.length)],degree:Number($(0,360).toFixed(1)),speed:Math.round($(0,25)),friction:.9,opacity:Number($(0,.5).toFixed(1)),yVel:0,gravity:.04}}),i,t.width,t.height),e.canvasRemovalTimer=setTimeout(function(){null==n||n.removeChild(t)},(e.props.delay||0)+1e3)}}),e}return U(i.prototype,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.delay,r=t.startAnimation,i=e.startAnimation;r&&i!==r&&(this.animationTimer=setTimeout(this.explode,n))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,C.jsx)(p.xu,{ref:this.containerRef,children:(0,C.jsx)(p.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}]),n&&U(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(c.PureComponent);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){ec(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ed(r.key),r)}}function ea(e,t){return(ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function es(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,t,n){return(t=ed(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ed(e){var t=function(e,t){if("object"!==et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==et(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===et(t)?t:String(t)}X(ee,"defaultProps",{delay:0});var eu=function(e,t,n){var r,i,o=[],a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect(),s=null===(i=n.current)||void 0===i?void 0:i.getBoundingClientRect();if(a&&s){var l={x:s.left-a.left,y:s.top-a.top},c={x:s.width/a.width,y:s.height/a.height};o.push("translate(".concat(l.x,"px, ").concat(l.y,"px)")),o.push("scale(".concat(c.x,", ").concat(c.y,")"))}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ep=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ea(e,t)}(o,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=el(o);if(t){var r=el(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return es(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return ec(es(e=i.call.apply(i,[this].concat(n))),"state",{startAnimation:!1}),ec(es(e),"dismissTimer",null),ec(es(e),"pinRef",(0,c.createRef)()),ec(es(e),"pinDestinationRef",(0,c.createRef)()),ec(es(e),"handleAnimationAndCompletion",function(){var t=e.props,n=t.onComplete,r=t.savePin,i=t.selectedBoardName;if(i){var o=e.startAnimation();Promise.all([o,r(i)]).then(function(e){n((function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ei(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],i)}).catch(function(e){o.then(function(){e&&e.onError&&e.onError()})})}}),ec(es(e),"startAnimation",function(){return new Promise(function(t){e.setState({startAnimation:!0},function(){e.dismissTimer=setTimeout(function(){t()},2600)})})}),e}return n=[{key:"componentWillUnmount",value:function(){this.dismissTimer&&clearTimeout(this.dismissTimer)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedBoardName,t=this.state.startAnimation;e&&!t&&this.handleAnimationAndCompletion()}},{key:"render",value:function(){var e=this,t=this.props,n=t.pinDominantColor,r=t.pinImageUrl,i=t.selectedBoardName,o=this.state.startAnimation;return(0,C.jsxs)(c.Fragment,{children:[(0,C.jsx)(p.Le,{top:P.DEFAULT_HEIGHT,zIndex:new p.Ry(3),children:(0,C.jsx)(p.xu,{display:"flex",color:o?"transparent":"default",justifyContent:"center",alignItems:"center",children:(0,C.jsx)(p.xu,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:eu(o,this.pinRef,this.pinDestinationRef)},children:(0,C.jsx)(p.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),src:r,fit:"cover",naturalHeight:84,naturalWidth:84,color:n})})})}),(0,C.jsx)(p.xu,{color:"default",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:o?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},children:(0,C.jsxs)(p.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,C.jsx)(ee,{delay:1200,startAnimation:o,children:(0,C.jsx)(p.zd,{rounding:2,width:148,children:(0,C.jsx)(p.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map(function(t,n){var r=n<=1,i=n%2,o=0===n?e.pinDestinationRef:null;return(0,C.jsx)(p.xu,{ref:o,color:0===n?"transparent":"secondary",marginBottom:r?1:0,marginEnd:i?0:1,width:72,height:72},n)})})})}),(0,C.jsx)(p.xu,{paddingX:4,dangerouslySetInlineStyle:{__style:{opacity:o?1:0,WebkitTransform:o?"translateY(0)":"translateY(20%)",transform:o?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},children:(0,C.jsx)(p.X6,{children:(0,b.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:i})})})]})})]})}}],eo(o.prototype,n),r&&eo(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(c.PureComponent),ef=function(e){var t=(0,y.ZP)();return(0,C.jsx)(ep,er(er({},e),{},{i18n:t}))},eh=n(662089),e_=n(348854),em=n(990823),eg=n(819063),ey=n(384833),eb=n(698330),ev=n(404508);n(704217);var eP=n(916117),ex=n(773285),ej=n(343341),eS=n(497307),ew=n(678638),eI=n(139574),ek=n(850431),eA=n(166753),eB=n(580751);function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ez(r.key),r)}}function eR(e,t){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eE(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eC(e){return(eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eF(e,t,n){return(t=ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ez(e){var t=function(e,t){if("object"!==eT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eT(t)?t:String(t)}var eZ=void 0!==r?r:r=n(172335),eL=function(e){var t;return{entityId:e.id,pinnedToBoard:e.pinned_to_board&&{entityId:null!==(t=e.pinned_to_board.id)&&void 0!==t?t:"",url:e.pinned_to_board.url}}},eD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eR(e,t)}(i,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eC(i);if(t){var r=eC(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eE(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return eF(eE(e=r.call.apply(r,[this].concat(n))),"state",{name:""}),eF(eE(e),"onNextButtonTouch",function(){var t=e.state.name,n=e.props;(0,n.createSectionAndRepin)(t,n.i18n)}),eF(eE(e),"onNameChange",function(t){e.setState({name:t.target.value})}),e}return eO(i.prototype,[{key:"render",value:function(){var e=this.props,t=e.pin,n=e.useRoundedCorners,r=this.state.name;return(0,C.jsx)(eS.Z,{backButtonIcon:"arrow-back",name:r,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[t.entityId],useRoundedCorners:n})}}]),n&&eO(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(c.PureComponent);function eM(e){var t=e.boardId,n=e.isEditingPin,r=e.onSuccess,i=e.pinKey,o=e.pinBoardId,a=e.pinSectionId,s=e.trackingParams,l=e.useRoundedCorners,c=(0,eP.u)(eZ,i,{useLegacyAdapter:eL}).data,p=(0,d.useDispatch)(),h=(0,u.useHistory)(),_=(0,y.ZP)(),m=(0,ej.F9)().showToast,b=(0,f.Z)(),v=(0,eB.M)(),P=(0,ex.F)().checkExperiment,x=function(e){return h.push(e)};return(0,C.jsx)(eD,{i18n:_,createSectionAndRepin:function(e){var i=function(e){return m(function(t){var n=t.hideToast;return(0,C.jsx)(g.ZP,{text:e.message||_._('Sorry! Something went wrong on our end.', 'error creating board section', 'error creating board section'),type:"error",onHide:n})})};p((0,ew.Nv)(t,[],e,b)).then(function(e){m(function(e){var t=e.hideToast;return(0,C.jsx)(g.ZP,{text:_._('Section added!', ' - ', ' -- '),onHide:t})});var l,d=e.resource_response.data;p((0,ek.w)({checkExperiment:P,i18n:_,logContextEvent:b,pinId:c.entityId,boardId:t,onSuccess:n?void 0:r,onUndo:function(e,t,n,r){var i;return(0,eA.Z)({boardId:n,boardSectionId:r,clientTrackingParams:s,dispatch:p,i18n:_,newPinId:t,showToast:m,sourcePinId:e,undoSavedPin:null!==(i=null==v?void 0:v.unsave)&&void 0!==i?i:function(){}})},showToast:m,section:d,trackingParams:{clientTrackingParams:s,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:""},historyPush:x,savePinId:null!==(l=null==v?void 0:v.save)&&void 0!==l?l:function(){}})).then(function(){c&&o&&p((0,eI.q)({pinId:c.entityId,boardId:o,boardSectionId:a,clientTrackingParams:s})).then(function(){var e;return c.pinnedToBoard?h.replace(null!==(e=c.pinnedToBoard.url)&&void 0!==e?e:""):void 0})}).catch(i)}).catch(i)},pin:c,useRoundedCorners:l})}var eH=n(166300),eN=n(829407),eK=n(361115),eW=n(927383),eU=n(177891),eY=n(188170);function eq(e){var t=e.handleSelected,n=(0,y.ZP)(),r=(0,f.Z)();return(0,eN.Z)(function(){r({component:7,element:11933,event_type:13,view_type:3})}),(0,C.jsx)(p.iP,{rounding:2,onTap:function(){t(!1,null)},children:(0,C.jsxs)(p.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[(0,C.jsx)(p.xu,{color:"secondary",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:(0,C.jsx)(p.JO,{accessibilityLabel:n._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,C.jsx)(p.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:(0,C.jsx)(p.xv,{size:"400",weight:"bold",lineClamp:1,children:n._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}function eG(e){return(eG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eX(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function eV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var eJ=void 0!==i?i:i=n(612289),e$=function(e){var t;return{entityId:e.id,pinnedToBoard:e.pinned_to_board&&{entityId:null!==(t=e.pinned_to_board.id)&&void 0!==t?t:"",url:e.pinned_to_board.url},section:e.section&&{slug:e.section.slug},trackingParams:e.tracking_params}};function eQ(e){var t,n,r=e.boards,i=e.boardsShortlist,o=e.closeModal,a=e.dismissFlyout,s=e.history,l=e.isEditingPin,f=e.isFromToast,h=e.logContextEvent,_=e.onSelect,m=e.originalPinId,b=e.pinKey,v=e.pinBoardId,P=e.pinSectionId,x=e.saveToProfileEnabled,j=e.trackingParams,S=(0,y.ZP)(),w=(0,eP.u)(eJ,b,{useLegacyAdapter:e$}).data,I=(0,d.useDispatch)(),k=(0,u.useLocation)(),A=(0,eW.Z)(),T=(0,eB.M)(),R=s.location.state&&s.location.state.isOneTapSave,E=(0,ex.F)().checkExperiment,F=E("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||E("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,z=(0,B.Z)(k.state?k.state.trackingParams:"",w.trackingParams),Z=(0,eh.Z)(),L=Z.showRepinConfirmation,D=Z.showToast,M=function(e){return s.push(e)},H=i?r.filter(function(e){return i.some(function(t){return e.id===t.id})}):r.slice(0,3),N=H.map(function(e){return e.id});x&&N.unshift("PROFILE_PINS");var K=(0,eK.Yg)();(0,eN.Z)(function(){N&&h({event_type:13,component:7,element:1001,view_type:3,aux_data:{pin_id:w.entityId,suggested_boards:N}})});var W=function(e){var t,n=e.boardId,r=e.clientTrackingParams,i=e.i18n,o=e.isQuickSave;return a(),null==K||K("main_pin_repin"),I((0,ek.w)({checkExperiment:E,i18n:i,isQuickSave:o,logContextEvent:h,pinId:w.entityId,boardId:n,onSuccess:s.goBack,onUndo:function(e,t,n,o){var a;return(0,eA.Z)({boardId:n,boardSectionId:o,clientTrackingParams:r,dispatch:I,i18n:i,newPinId:t,originalPinId:f?m:"",showToast:D,sourcePinId:e,undoSavedPin:null!==(a=null==T?void 0:T.unsave)&&void 0!==a?a:function(){}})},originalPinId:m,showRepinConfirmation:L,trackingParams:j,historyPush:M,suggestedBoardIds:N,savePinId:null!==(t=null==T?void 0:T.save)&&void 0!==t?t:function(){}}))},U=A({fn:(t=regeneratorRuntime.mark(function e(t,n){var r,i,a,c,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&n)){e.next=4;break}_(n),e.next=20;break;case 4:return e.prev=4,r=!(null!=n&&n.id),e.next=8,W({boardId:null==n?void 0:n.id,clientTrackingParams:z,i18n:S,isQuickSave:r});case 8:var p;if(i=e.sent,(R||F)&&i&&(p={boardId:null==n?void 0:n.id,localPinId:i.id,pinId:w.entityId},I((0,eU.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!==eG(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eG(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eG(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},p)))),!l){e.next=15;break}return e.next=13,I((0,eI.q)({pinId:w.entityId,boardId:v||"",boardSectionId:P,clientTrackingParams:z}));case 13:c=null===(a=w.pinnedToBoard)||void 0===a?void 0:a.url,f?o():w.section?(u="".concat(null!=c?c:"").concat(null!==(d=w.section.slug)&&void 0!==d?d:"","/"),s.replace(null!=u?u:"")):w.pinnedToBoard&&s.replace(null!=c?c:"");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),D(function(t){var n=t.hideToast;return(0,C.jsx)(g.ZP,{type:"error",text:e.t0.message||S._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),onHide:n})});case 20:case"end":return e.stop()}},e,null,[[4,17]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){eX(o,r,i,a,s,"next",e)}function s(e){eX(o,r,i,a,s,"throw",e)}a(void 0)})},function(e,t){return n.apply(this,arguments)}),modalHeader:(0,O.Bx)(S)});return(0,C.jsxs)(c.Fragment,{children:[(0,C.jsxs)(p.xu,{paddingY:4,children:[x&&(0,C.jsx)(eq,{handleSelected:U}),H.map(function(e){return(0,C.jsx)(eY.Z,{boardId:e.id,onBoardSelected:function(t){return U(t,e)},showSingleBoardRep:!0},e.id)})]}),(0,C.jsxs)(p.xu,{children:[(0,C.jsx)(p.xu,{marginBottom:4,children:(0,C.jsx)(p.xv,{children:S._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})}),r.map(function(e){return(0,C.jsx)(eY.Z,{boardId:e.id,onBoardSelected:function(t){return U(t,e)},showSingleBoardRep:!0},e.id)})]})]})}var e0=n(63552),e1=function(){return(0,C.jsx)(p.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,C.jsxs)(c.Fragment,{children:[(0,C.jsx)(p.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,C.jsx)(p.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]})})},e2=n(675752),e8=n(109892);function e3(e){return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e9(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var e4=void 0!==o?o:o=n(390687),e6=function(e){var t;return{entityId:e.id,pinnedToBoard:e.pinned_to_board&&{url:e.pinned_to_board.url},richMetadata:e.rich_metadata&&{article:e.rich_metadata.article&&{__typename:"ArticleMetadata"},products:e.rich_metadata.products&&e.rich_metadata.products.map(function(){return{__typename:"RichPinProductMetadata"}}),recipe:(null===(t=e.rich_metadata)||void 0===t?void 0:t.recipe)&&{__typename:"RecipeMetadata"}},section:e.section&&{slug:e.section.slug},trackingParams:e.tracking_params}},e7=function(e){var t=e.allSuggestions,n=e.handleCreateBoard,r=e.index,i=e.isFBC,o=e.logContextEvent,a=e.pinViewParameter;n(),o({aux_data:{board_title_list:JSON.stringify(t),is_fbc:i.toString(),selected_board_title_index:r},component:7,element:23,event_type:102,view_parameter:a,view_type:3})};function te(e){var t,n,r,i,o,a=e.isEditingPin,s=e.isFirstBoard,l=e.history,c=e.onFirstBoardCreate,u=e.pinBoardId,h=e.pinKey,_=e.pinSectionId,m=e.titleSuggestions,g=e.clientTrackingParams,b=(0,f.Z)(),v=(0,e8.Z)(),P=(0,y.ZP)(),x=(0,eW.Z)(),j=(0,eh.Z)().showRepinConfirmation,S=(0,d.useDispatch)(),w=(0,eP.u)(e4,h,{useLegacyAdapter:e6}).data,I=w.entityId,k=(0,e2.A)({hasRichMetadata:!!w.richMetadata,hasRichMetadataProducts:!!(null!==(r=w.richMetadata)&&void 0!==r&&r.products),hasRichMetadataArticle:!!(null!==(i=w.richMetadata)&&void 0!==i&&i.article),hasRichMetadataRecipe:!!(null!==(o=w.richMetadata)&&void 0!==o&&o.recipe)}),A=(0,eB.M)(),T=(0,B.Z)(g,w.trackingParams),R=function(e){return l.push(e)},E=(0,ex.F)().checkExperiment,F=E("mweb_direct_save_from_grid_v2",{dangerouslySkipActivation:!0}).anyEnabled||E("mweb_direct_save_from_grid_v2_new_user",{dangerouslySkipActivation:!0}).anyEnabled,z=function(e){S((0,eI.q)({pinId:I,boardId:u||"",boardSectionId:_,clientTrackingParams:e}))},Z=(t=regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(T);case 2:n=null===(t=w.pinnedToBoard)||void 0===t?void 0:t.url,w.section?(i="".concat(null!=n?n:"").concat(null!==(r=w.section.slug)&&void 0!==r?r:"","/"),l.replace(null!=i?i:"")):l.replace(null!=n?n:"");case 4:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){e9(o,r,i,a,s,"next",e)}function s(e){e9(o,r,i,a,s,"throw",e)}a(void 0)})},function(){return n.apply(this,arguments)}),L=function(e){v({boardCreateOptions:{name:e,initial_pins:[I],initial_pin_client_tracking_params:[g],privacy:"public"}}).then(function(e){return a?Z():l.goBack(),e}).then(function(t){var n=t||{},r=n.url,i=n.id,o=(0,e_.Io)(void 0===r?"":r,e,P),a=o.href,s=o.text,l=(0,N.Z)({boardId:i,viewType:3}),c=l.duration,d=l.text,u=l.thumbnail;j(function(e){var t=e.hideToast;return(0,C.jsx)(K.Z,{duration:c,href:a,onHide:t,text:d||s,thumbnail:u})}),b({event_type:5,view_type:3,component:7,view_parameter:k,object_id_str:I,clientTrackingParams:T,aux_data:{board_id:i,destination_board_id:i}})})},D=function(e){v({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[g],privacy:"public"}}).then(function(t){var n,r=t||{},i=r.url,o=void 0===i?"":i,s=r.id;S((0,ek.w)({checkExperiment:E,i18n:P,logContextEvent:b,pinId:I,boardId:s,onUndo:function(){z(T)},trackingParams:{clientTrackingParams:T,pinnedToBoardId:s},historyPush:R,savePinId:null!==(n=null==A?void 0:A.save)&&void 0!==n?n:function(){}})).then(function(t){n={boardId:s,localPinId:t.id,pinId:I},S((0,eU.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!==e3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e3(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n))),a?Z():l.goBack();var n,r=(0,e_.Io)(o,e,P),i=r.href,c=r.text,d=(0,N.Z)({boardId:s,viewType:3}),u=d.duration,p=d.text,f=d.thumbnail;j(function(e){var t=e.hideToast;return(0,C.jsx)(K.Z,{duration:u,href:i,onHide:t,text:p||c,thumbnail:f})}),b({event_type:5,view_type:3,component:7,view_parameter:k,object_id_str:I,clientTrackingParams:T,aux_data:{board_id:s,destination_board_id:s}})})})},M=x({fn:function(e,t,n){e7({allSuggestions:n,handleCreateBoard:function(){s?c(t):F?D(t):L(t)},index:e,isFBC:s,logContextEvent:b,pinViewParameter:k})},modalHeader:(0,O.Bb)(P)});return m?m.map(function(e,t,n){return(0,C.jsx)(p.xu,{children:(0,C.jsx)(e0.Z,{onTouch:function(){return M(t,e,n)},pressState:"none",rounding:2,children:(0,C.jsxs)(p.xu,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[(0,C.jsx)(e1,{}),(0,C.jsx)(p.xu,{column:10,marginStart:3,children:(0,C.jsx)(p.X6,{size:"400",children:e})})]})},t)},t)}):null}var tt=void 0!==a?a:a=n(664326),tn=function(e){var t;return{boardTitleSuggestions:e.board_title_suggestions&&e.board_title_suggestions.map(function(e){return{title:e.title}}),pinnedToBoard:e.pinned_to_board&&{entityId:null!==(t=e.pinned_to_board.id)&&void 0!==t?t:""}}};function tr(e){var t=e.allBoards,n=e.saveToProfileEnabled,r=e.boardsShortlist,i=e.closeModal,o=e.dismissFlyout,a=e.history,s=e.isEditingPin,l=e.isFromToast,d=e.onSelect,u=e.originalPinId,h=e.pin,_=e.pinBoardId,m=e.pinSectionId,g=e.trackingParams,b=(0,y.ZP)(),v=(0,f.Z)();return(0,C.jsxs)(c.Fragment,{children:[(0,C.jsx)(p.xu,{marginTop:2,children:(0,C.jsx)(p.xv,{children:b._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),(0,C.jsx)(eQ,{boards:t,boardsShortlist:r,closeModal:i,dismissFlyout:o,history:a,isEditingPin:s,isFromToast:l,logContextEvent:v,onSelect:d,originalPinId:u,pinKey:h,pinBoardId:_,pinSectionId:m,saveToProfileEnabled:n,trackingParams:g})]})}function ti(e){var t=e.allBoards,n=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,o=e.dismissFlyout,a=e.history,s=e.isEditingPin,l=e.isFirstRepinExperience,c=e.isFromToast,d=e.onFirstBoardCreate,u=e.originalPinId,h=e.onSelect,_=e.pin,m=e.pinBoardId,g=e.pinSectionId,b=e.trackingParams,v=e.titleSuggestions,P=(0,y.ZP)(),x=l||0===t.length&&!i,j=(0,f.Z)(),S=function(){return(0,C.jsx)(te,{history:a,isEditingPin:s,isFirstBoard:x,onFirstBoardCreate:d,pinBoardId:m,pinKey:_,pinSectionId:g,titleSuggestions:v,clientTrackingParams:b.clientTrackingParams})};return x?(0,C.jsxs)(p.xu,{paddingX:1,children:[(0,C.jsx)(p.xu,{marginBottom:4,children:(0,C.jsx)(p.xv,{children:P._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),S()]}):(0,C.jsxs)(p.xu,{marginBottom:4,children:[n.length>0||i&&(0,C.jsx)(p.xu,{marginBottom:4,children:(0,C.jsx)(p.xv,{children:P._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})}),(0,C.jsx)(eQ,{boards:t,boardsShortlist:n,closeModal:r,dismissFlyout:o,history:a,isEditingPin:s,isFromToast:c,logContextEvent:j,onSelect:h,originalPinId:u,pinKey:_,pinBoardId:m,pinSectionId:g,saveToProfileEnabled:i,trackingParams:b}),v?(0,C.jsxs)(p.xu,{children:[(0,C.jsx)(p.xu,{paddingY:1,children:(0,C.jsx)(eH.Z,{children:(0,C.jsx)(p.iz,{})})}),(0,C.jsx)(p.xu,{paddingY:4,children:(0,C.jsx)(p.xv,{children:P._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),S()]}):(0,C.jsx)(p.xu,{paddingY:6,children:(0,C.jsx)(p.$j,{accessibilityLabel:P._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function to(e){var t,n,r=e.allBoards,i=e.boardsShortlist,o=e.closeModal,a=e.saveToProfileEnabled,s=e.dismissFlyout,l=e.history,c=e.isEditingPin,d=e.isFetchingBoards,u=e.isFirstRepinExperience,p=e.isFromToast,f=e.onFirstBoardCreate,h=e.onSelect,_=e.originalPinId,m=e.location,g=e.pinKey,y=e.pinBoardId,b=e.pinDescription,v=e.pinSectionId,P=(0,eP.u)(tt,g,{useLegacyAdapter:tn}).data,x=null!==(t=null===(n=P.boardTitleSuggestions)||void 0===n?void 0:n.map(function(e){return e.title}).filter(Boolean))&&void 0!==t?t:[];return(0,C.jsx)(ta,{allBoards:r,boardsShortlist:i,saveToProfileEnabled:a,history:l,isFetchingBoards:d,isFirstRepinExperience:u,isFromToast:p,location:m,onFirstBoardCreate:f,onSelect:h,originalPinId:_,closeModal:o,pin:P,pinDescription:b,dismissFlyout:s,isEditingPin:c,pinBoardId:y,pinSectionId:v,titleSuggestions:x})}function ta(e){var t=(0,y.ZP)(),n=e.allBoards,r=e.boardsShortlist,i=e.closeModal,o=e.saveToProfileEnabled,a=e.dismissFlyout,s=e.history,l=e.isEditingPin,c=e.isFetchingBoards,d=e.isFirstRepinExperience,u=e.isFromToast,f=e.onFirstBoardCreate,h=e.onSelect,_=e.originalPinId,m=e.location,g=e.pin,b=e.pinBoardId,v=e.pinDescription,P=e.pinSectionId,x=e.titleSuggestions,j={clientTrackingParams:m.state?m.state.trackingParams:"",pinnedToBoardId:g.pinnedToBoard?g.pinnedToBoard.entityId:""};return n.length>0||!c?n.length>=10?(0,C.jsx)(tr,{allBoards:n,boardsShortlist:r,closeModal:i,dismissFlyout:a,history:s,isEditingPin:l,isFromToast:u,onSelect:h,originalPinId:_,pin:g,pinBoardId:b,pinDescription:v,pinSectionId:P,saveToProfileEnabled:o,trackingParams:j}):(0,C.jsx)(ti,{allBoards:n,boardsShortlist:r,closeModal:i,dismissFlyout:a,history:s,isEditingPin:l,isFirstRepinExperience:d,isFromToast:u,onFirstBoardCreate:f,onSelect:h,originalPinId:_,pin:g,pinBoardId:b,pinDescription:v,pinSectionId:P,saveToProfileEnabled:o,titleSuggestions:x,trackingParams:j}):(0,C.jsx)(p.xu,{paddingY:2,children:(0,C.jsx)(p.$j,{accessibilityLabel:t._('Loading repin page content', ' - ', ' -- '),show:!0})})}var ts=n(287072),tl=void 0!==s?s:s=n(893831),tc=function(e){var t;return{entityId:e.id,pinnedToBoard:e.pinned_to_board&&{entityId:null!==(t=e.pinned_to_board.id)&&void 0!==t?t:""}}};function td(e){var t=e.isEditingPin,n=e.isFirstBoardCreateActive,r=e.pinKey,i=e.pinBoardId,o=e.pinDescription,a=e.pinSectionId,s=e.trackingParams,l=e.onTouch,c=e.useIconWithBackground,d=(0,y.ZP)(),u=(0,eP.u)(tl,r,{useLegacyAdapter:tc}).data,f=(0,ts.Z)({href:{pathname:"/board/create/".concat(u.entityId,"/"),state:{isFirstBoardCreateActive:n,pinnedToBoardId:u.pinnedToBoard?u.pinnedToBoard.entityId:"",pinDescription:o,trackingParams:s,isEditingPin:t,pinBoardId:i,pinSectionId:a}}});return(0,C.jsx)(P.FixedFooter,{height:c?void 0:70,hasTopShadow:c,children:(0,C.jsx)(p.iP,{onTap:function(e){var t=e.event;null==l||l(),f({event:t})},children:(0,C.jsxs)(p.xu,{"data-test-id":"repinCreateBoardButton",display:"flex",alignItems:"center",paddingY:c?0:1,paddingX:c?1:0,children:[c?(0,C.jsx)(p.xu,{color:"secondary",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,C.jsx)(p.JO,{icon:"add",color:"default",size:20,accessibilityLabel:d._('Create board button', ' - ', ' -- ')})}):(0,C.jsx)(p.JO,{icon:"add-circle",color:"error",size:38,accessibilityLabel:d._('Create board button', ' - ', ' -- ')}),(0,C.jsx)(p.xu,{marginStart:c?2:3,children:(0,C.jsx)(p.xv,{weight:"bold",children:d._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var tu=n(568674);function tp(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}var tf=void 0!==l?l:l=n(592657),th=function(e){var t;return{entityId:e.id,pinnedToBoard:e.pinned_to_board&&{entityId:null!==(t=e.pinned_to_board.id)&&void 0!==t?t:"",url:e.pinned_to_board.url},trackingParams:e.tracking_params}};function t_(e){var t,n,r=e.boardId,i=e.history,o=e.location.search,a=e.showSectionRep,s=e.pinKey,l=e.onSuccess,c=e.trackingParams,u=e.dismissFlyout,p=(0,d.useDispatch)(),h=(0,y.ZP)(),_=(0,eP.u)(tf,s,{useLegacyAdapter:th}).data,m=(0,ej.F9)().showToast,g=new URLSearchParams(o),b=g.get("isEditingPin"),v=(0,B.Z)(c,_.trackingParams),P=(0,f.Z)(),x=(0,eB.M)(),j=(0,ex.F)().checkExperiment,S=function(e){return i.push(e)},w=function(e){var t;u(),p((0,ek.w)({checkExperiment:j,i18n:h,logContextEvent:P,pinId:_.entityId,boardId:r,onSuccess:b?void 0:l,onUndo:function(e,t,n,r){var i;return(0,eA.Z)({boardId:n,boardSectionId:r,clientTrackingParams:v,dispatch:p,i18n:h,newPinId:t,showToast:m,sourcePinId:e,undoSavedPin:null!==(i=null==x?void 0:x.unsave)&&void 0!==i?i:function(){}})},showToast:m,section:e,trackingParams:{clientTrackingParams:v,pinnedToBoardId:_.pinnedToBoard?_.pinnedToBoard.entityId:""},historyPush:S,savePinId:null!==(t=null==x?void 0:x.save)&&void 0!==t?t:function(){}})).then(function(){if(e){var t;p((0,ew.A4)(null!==(t=e.id)&&void 0!==t?t:""))}})},I=function(){var e,t,n=null!==(e=g.get("pinBoardId"))&&void 0!==e?e:"",r=null!==(t=g.get("pinSectionId"))&&void 0!==t?t:"";return p((0,eI.q)({pinId:_.entityId,boardId:n,boardSectionId:r,clientTrackingParams:v}))},k=(t=regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n);case 2:if(!b){e.next=6;break}return e.next=5,I();case 5:null!==(r=_.pinnedToBoard)&&void 0!==r&&r.url&&i.replace(_.pinnedToBoard.url);case 6:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){tp(o,r,i,a,s,"next",e)}function s(e){tp(o,r,i,a,s,"throw",e)}a(void 0)})},function(e,t){return n.apply(this,arguments)});return(0,C.jsx)(tu.Z,{boardId:r,repin:k,showSectionRep:a})}function tm(e){return(tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(n),!0).forEach(function(t){tj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tS(r.key),r)}}function tv(e,t){return(tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tP(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tx(e){return(tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tj(e,t,n){return(t=tS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tS(e){var t=function(e,t){if("object"!==tm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tm(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tm(t)?t:String(t)}function tw(e){var t=e.children,n=(0,d.useSelector)(function(e){var t=e.session;return 72+((0,v.Rq)(t.userAgentPlatform)?v.Vf:0)});return(0,C.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:n}},children:t})}var tI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tv(e,t)}(o,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=tx(o);if(t){var r=tx(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===tm(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tP(e)}(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return tj(tP(e=i.call.apply(i,[this].concat(n))),"state",{dupeWarningDismissed:!1,pinDescription:(e.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(e.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0}),tj(tP(e),"saved",function(){return e.setState({saved:!0})}),tj(tP(e),"onResize",function(){e.setState({windowInnerHeight:window.innerHeight})}),tj(tP(e),"handleBackButtonTouch",function(){var t=e.props;(0,t.logContextEvent)({view_type:21,view_parameter:87,component:7,element:t.match.params.boardId?34:75,event_type:102})}),tj(tP(e),"handleDismissWarningFlyout",function(){return e.setState({dupeWarningDismissed:!0})}),tj(tP(e),"handleFirstBoardCreateOnSuccess",function(t,n){var r=e.props,i=r.closeupExperience,o=r.completeExperience,a=r.history,s=r.i18n,l=r.repinExperience,c=r.showRepinConfirmation,d=t.boardId,u=t.boardUrl,p=(0,e_.Io)(u,n,s),f=p.href,h=p.text,_=(0,N.Z)({boardId:d,isFBC:!0,viewType:21}),m=_.duration,g=_.text,y=_.thumbnail;a.goBack(),c(function(e){var t=e.hideToast;return(0,C.jsx)(K.Z,{duration:m,href:f,onHide:t,text:g||h,thumbnail:y})}),i&&i.placement_id&&503459===i.experience_id&&o(i.placement_id,i.experience_id),l&&T(l,501032)&&o(l.placement_id,l.experience_id)}),tj(tP(e),"handleSetSelectedBoard",function(t){var n=e.props,r=n.history,i=n.pin,o=e.state.trackingParams;e.isFirstBoardCreateActive()||r.push("/board/create/".concat(i.id,"/").concat(t,"/"),{trackingParams:o}),e.setState({suggestedBoardName:t})}),tj(tP(e),"handleFirstBoardCreate",function(t){var n=e.props,r=n.createBoard,i=n.history,o=n.location,a=n.logContextEvent,s=n.match,l=n.pin,c=n.showToast,d=e.state.trackingParams,u=s.params.id;return r({boardCreateOptions:{initial_pins:u?[u]:[],name:t,initial_pin_client_tracking_params:[(0,B.Z)((o.state||{}).trackingParams)],privacy:"public"},deprecatedSchemaForNormalization:eg.IY}).then(function(e){var t,n,r,i=e.id;a({event_type:5,view_type:3,component:7,view_parameter:(0,e2.A)({hasRichMetadata:!!l.rich_metadata,hasRichMetadataProducts:!!(null!==(t=l.rich_metadata)&&void 0!==t&&t.products),hasRichMetadataArticle:!!(null!==(n=l.rich_metadata)&&void 0!==n&&n.article),hasRichMetadataRecipe:!!(null!==(r=l.rich_metadata)&&void 0!==r&&r.recipe)}),object_id_str:l.id,clientTrackingParams:(0,B.Z)(d,l.tracking_params),aux_data:{board_id:i,destination_board_id:i}});var o=e.url;return{boardId:i,boardUrl:void 0===o?"":o}},function(t){throw{onError:function(){i.goBack(),c(function(n){var r=n.hideToast;return(0,C.jsx)(g.ZP,{onHide:r,type:"error",text:t.message||e.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board')})})}}})}),tj(tP(e),"handleSelectBoard",function(t){var n,r,i=e.props,o=i.history,a=i.pin,s=i.location.search,l=e.state.trackingParams,c=new URLSearchParams(s),d=!!c.get("isEditingPin"),u=null!==(n=c.get("pinBoardId"))&&void 0!==n?n:"",p=null!==(r=c.get("pinSectionId"))&&void 0!==r?r:"";d?o.push("/pin/".concat(a.id,"/repin/").concat(t.id,"/?isEditingPin=true&pinBoardId=").concat(u,"&pinSectionId=").concat(p),{trackingParams:l}):o.push({pathname:"/pin/".concat(a.id,"/repin/").concat(t.id,"/")},{trackingParams:l})}),tj(tP(e),"handleClickAddSectionButton",function(){var t,n,r=e.props,i=r.pin,o=r.history,a=r.match.params.boardId,s=r.location.search;if(a){var l=new URLSearchParams(s),c=!!l.get("isEditingPin"),d=null!==(t=l.get("pinBoardId"))&&void 0!==t?t:"",u=null!==(n=l.get("pinSectionId"))&&void 0!==n?n:"";c?o.push("/pin/".concat(i.id,"/repin/").concat(a,"/add/?isEditingPin=true&pinBoardId=").concat(d,"&pinSectionId=").concat(u)):o.push({pathname:"/pin/".concat(i.id,"/repin/").concat(a,"/add/")})}}),tj(tP(e),"handleRepinToExistingSectionSuccess",function(){return e.props.history.go(-2)}),tj(tP(e),"handleRepinToNewSectionSuccess",function(){return e.props.history.go(-3)}),tj(tP(e),"handleRepinCreateBoardButtonTouch",function(){e.props.logContextEvent({view_type:21,view_parameter:87,component:7,element:249,event_type:102})}),tj(tP(e),"renderCreateScreen",function(){var t,n,r=e.props,i=r.pin,o=r.location.search,a=r.match.params.boardId,s=e.state.trackingParams,l=new URLSearchParams(o),c=!!l.get("isEditingPin"),d=null!==(t=l.get("pinBoardId"))&&void 0!==t?t:"",u=null!==(n=l.get("pinSectionId"))&&void 0!==n?n:"";return!!a&&(0,C.jsx)(eM,{boardId:a,isEditingPin:c,pinBoardId:d,pinSectionId:u,onSuccess:e.handleRepinToNewSectionSuccess,pinKey:{type:"deprecated",data:i},trackingParams:s,useRoundedCorners:!0})}),tj(tP(e),"isFirstBoardCreateActive",function(){var t=e.props,n=t.allBoards,r=t.isFetchingBoards,i=t.saveToProfileEnabled;return!!T(t.repinExperience,501032)||!r&&0===n.length&&!i}),tj(tP(e),"isBoardCreateEduActive",function(){return T(e.props.repinExperience,501021)}),tj(tP(e),"completeBoardCreateEduExperience",function(){var t=e.props,n=t.completeExperience,r=t.repinExperience;r&&e.isBoardCreateEduActive()&&n(r.placement_id,r.experience_id)}),tj(tP(e),"renderPicker",function(){var t,n,r,i,o,a=e.props,s=a.allBoards,l=a.saveToProfileEnabled,c=a.boardsShortlist,d=a.history,u=a.isFetchingBoards,f=a.location,h=a.pin,_=a.match.params.boardId,m=a.location.search,g=e.state,y=g.pinDescription,v=g.dupeWarningDismissed,j=g.saved,S=g.suggestedBoardName,w=g.trackingParams,I=g.warningAnchor,B=y.trim(),T=h.pinned_to_board,E=T?(0,b.nk)(e.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:T.name}).join(" "):null,F=h.dominant_color,z=h.images?h.images["236x"]:null,Z=z?z.url:"",L=new URLSearchParams(m),D=!!L.get("isEditingPin"),M=null!==(t=L.get("pinBoardId"))&&void 0!==t?t:"",N=null!==(n=L.get("pinSectionId"))&&void 0!==n?n:"",K=!!L.get("isFromToast"),W=null!==(r=L.get("originalPinId"))&&void 0!==r?r:"",U=e.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),Y=new p.Ry(2),q=e.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),G=e.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),X=_?U:0!==s.length||u||l?G:q;return(0,C.jsxs)(x.default,{hasFixedHeader:!0,children:[(0,C.jsx)(A.Z,{text:X}),(0,C.jsx)(P.FixedHeader,{useRoundedCorners:!0,zIndex:Y,children:(0,C.jsxs)(p.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,C.jsx)(p.xu,{column:2,children:(0,C.jsx)(ev.Z,{color:"darkGray",icon:_?"arrow-back":"cancel",onTouch:e.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),(0,C.jsx)(p.xu,{column:8,children:(0,C.jsx)(p.xu,{"data-test-id":"repin-page-title",children:(0,C.jsx)(p.xv,{align:"center",weight:"bold",children:X})})}),(0,C.jsx)(p.xu,{column:2})]})}),h.images&&(e.isFirstBoardCreateActive()?(0,C.jsx)(ef,{onComplete:e.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=F?F:"",pinImageUrl:null!=Z?Z:"",savePin:e.handleFirstBoardCreate,selectedBoardName:S}):null),(0,C.jsx)(tw,{children:_?(0,C.jsx)(t_,{boardId:_,onSuccess:e.handleRepinToExistingSectionSuccess,pinKey:{type:"deprecated",data:h},trackingParams:w,dismissFlyout:e.saved,showSectionRep:!0,history:d,location:f}):(0,C.jsx)(to,{allBoards:s,boardsShortlist:c,saveToProfileEnabled:l,history:d,isFetchingBoards:u,isFirstRepinExperience:e.isFirstBoardCreateActive(),isFromToast:K,location:f,onFirstBoardCreate:e.handleSetSelectedBoard,onSelect:e.handleSelectBoard,originalPinId:W,closeModal:e.handleBackButtonTouch,pinKey:{type:"deprecated",data:h},pinDescription:B,dismissFlyout:e.saved,isEditingPin:D,pinBoardId:M,pinSectionId:N})}),_?(0,C.jsx)(k.Wx,{onAddNewSection:e.handleClickAddSectionButton,useIconWithBackground:!0}):(0,C.jsx)(R.Z,{modalHeader:(0,O.Bb)(e.props.i18n),nextLocation:"/board/create/".concat(h.id,"/"),children:(0,C.jsx)(td,{isFirstBoardCreateActive:e.isFirstBoardCreateActive(),pinKey:{type:"deprecated",data:h},pinDescription:B,trackingParams:w,onTouch:e.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:D,pinBoardId:M,pinSectionId:N})}),z&&e.isBoardCreateEduActive()&&(0,C.jsx)(H,{completeExperience:e.completeBoardCreateEduExperience,pinDominantColor:null!=F?F:"",pinImageHeight:null!==(i=z.height)&&void 0!==i?i:1,pinImageWidth:null!==(o=z.width)&&void 0!==o?o:1,pinImageUrl:null!=Z?Z:""}),I&&!j&&h.pinned_to_board&&!v&&E&&(0,C.jsx)(p.J2,{anchor:I,color:"red",idealDirection:"down",onDismiss:e.handleDismissWarningFlyout,shouldFocus:!1,children:(0,C.jsx)(p.xu,{padding:3,children:(0,C.jsx)(p.xv,{color:"inverse",weight:"bold",children:(0,C.jsx)("span",{children:E})})})})]})}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.repinExperience,n=e.triggerExperimentsForPlacement,r=e.viewExperience;n(1000153),t&&r(1000153,t.experience_id),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return(0,C.jsx)(_.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),isOpen:!0,type:"repinPage",closeOnOutsideClick:!1,onDismiss:function(){},children:(0,C.jsx)(p.xu,{paddingX:2,paddingY:0,height:this.state.windowInnerHeight-m.i_,children:(0,C.jsxs)(u.Switch,{children:[(0,C.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,C.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,C.jsx)(u.Route,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}],tb(o.prototype,n),r&&tb(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(c.PureComponent),tk=function(e){var t=(0,d.useSelector)(function(e){return e.session.userId}),n=(0,S.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:t}}),r=n.isFetching,i=n.data,o=(null==i?void 0:i.all_boards)||[];return{isFetching:r,allBoards:(0,d.useSelector)(function(e){return(0,ey.Z)(ty(ty({},e),{},{boards:o}))||[]}),boardsShortlist:(null==i?void 0:i.boards_shortlist)||[]}};function tA(e){var t,n=(0,u.useHistory)(),r=(0,u.useLocation)(),i=(0,u.useRouteMatch)(),o=null!==(t=i.params.id)&&void 0!==t?t:"",a=(0,y.ZP)(),s=(0,f.Z)(),l=(0,h.be)(),c=(0,h.Ig)(),p=(0,e8.Z)(),_=(0,eb.Tt)(),m=(0,I.Z)().isAuth,g=(0,w.HG)(),b=(0,S.Z)({name:"PinResource",options:{id:o,field_set_key:"repin"}}).data,v=tk(o),P=v.isFetching,x=v.allBoards,k=v.boardsShortlist;(0,j.Z)({name:"UserResource",options:{user_id:null==_?void 0:_.id,field_set_key:"quicksave"}});var A=(0,d.useDispatch)(),B=(0,d.useSelector)(function(e){return e.experiences}),T=(0,eh.Z)(),O=T.showToast,R=T.showRepinConfirmation,E=(0,em.ZP)((null==_?void 0:_.id)||"").showEnabledSaveBehavior;return!m||g?(0,C.jsx)(u.Redirect,{to:"/pin/".concat(o,"/")}):b?(0,C.jsx)(tI,ty(ty({},e),{},{allBoards:x,boardsShortlist:k,closeupExperience:B[1000112],completeExperience:function(e,t){return A(l(e,t))},createBoard:p,history:n,i18n:a,isFetchingBoards:P,location:r,logContextEvent:s,match:i,pin:b,repinExperience:B[1000153],saveToProfileEnabled:E,showRepinConfirmation:R,showToast:O,triggerExperimentsForPlacement:function(e){return A((0,h.kd)(e))},viewExperience:function(e,t){return A(c(e,t))}})):null}},990823:function(e,t,n){n.d(t,{ZP:function(){return l},tY:function(){return u},Xt:function(){return c},Yh:function(){return d}});var r=n(506979),i=n(773285),o=n(784590),a=n(19121),s={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function l(e){var t,n,r=(0,a.Z)(),s=r.isAuth&&r.id===e,l=(0,i.F)().checkExperiment,c=(0,o.Z)(!r.isAuth||s?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:s&&r.has_quicksave_board||!!(r.isAuth&&null!==(t=(null!=c?c:{}).data)&&void 0!==t&&t.has_quicksave_board)||(s||r.isAuth)&&!r.has_quicksave_board&&!(null!==(n=(null!=c?c:{}).data)&&void 0!==n&&n.has_quicksave_board)&&l("profile_saves_for_all").anyEnabled}}function c(e){var t,n=(0,a.Z)(),r=n.isAuth&&n.id===e,i=(0,o.Z)(!n.isAuth||r?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:r&&n.has_quicksave_board||!!(n.isAuth&&null!==(t=(null!=i?i:{}).data)&&void 0!==t&&t.has_quicksave_board)}}function d(e){var t,n=(0,r.useDispatch)(),i=(0,a.Z)(),s=i.isAuth&&!!i.boardCount&&i.boardCount<5&&e,l=(0,o.Z)(s&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:i.isAuth&&i.id}}:null);return i.isAuth&&void 0===i.save_behavior&&l&&null!==(t=l.data)&&void 0!==t&&t.id&&n({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:l.data.save_behavior}}),{showEnabledSaveBehavior:s}}function u(e){var t,n=(0,a.Z)();return e&&(n.save_behavior===s.SAVE_TO_PROFILE?t={type:"classic"}:n.save_behavior===s.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}},384833:function(e,t,n){var r=(0,n(904202).P1)(function(e){var t=e.users,n=e.boards,r=t[e.session.userId]||null;return Object.keys(n).reduce(function(e,t){var i,o=n[t];return!o.archived_by_me_at&&((null===(i=o.owner)||void 0===i?void 0:i.id)===r.id||o.collaborating_users&&o.collaborating_users.map(function(e){return e.id}).includes(r.id))&&o.cover_images?e.concat([o]):e},[])},function(e){return e.sort(function(e,t){return e.name.localeCompare(t.name)})});t.Z=r},188170:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(506979),i=n(908390),o=n(898781),a=n(349700),s=n(927383),l=n(618224),c=n(515198);function d(e){var t,n=e.boardId,d=e.onBoardSelected,u=e.noArrowIcon,p=e.showSingleBoardRep,f=(0,o.ZP)(),h=(0,r.useSelector)(function(e){return e.boards})[n],_=h.section_count,m=!!_&&_>0,g=(0,s.Z)(),y=null!==(t=h.name)&&void 0!==t?t:"this board";return(0,c.jsx)(i.iP,{rounding:2,onTap:g({fn:function(){return d(m)}}),accessibilityLabel:(0,a.Wc)("".concat(f._('Select {{ boardName }}', 'board.picker.row.select.board', 'Accessibility label for select board button')),{boardName:y}),tapStyle:"compress",children:(0,c.jsx)(l.Z,{boardId:n,noArrowIcon:u,showSingleBoardRep:p})})}},618224:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(76911),i=n(506979),o=n(908390),a=n(898781),s=n(349700),l=n(758127),c=n(948618),d=n(223019),u=n(515198);function p(e){var t=e.boardId,n=e.navigateToBoard,p=e.noArrowIcon,f=e.showCollaborators,h=e.showSingleBoardRep,_=e.shouldShowPinAndSectionCount,m=(0,a.ZP)(),g=(0,i.useSelector)(function(e){return e.boards})[t],y=(g.collaborating_users||[]).map(function(e){var t,n;return{name:null!==(t=e.username)&&void 0!==t?t:"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":null!==(n=e.image_medium_url)&&void 0!==n?n:""}}),b="",v=y.slice(0,3).map(function(e){return e.name});switch(y.length){case 3:b=(0,s.Wc)("".concat(m._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(v[0]),second:"".concat(v[1]),last:"".concat(v[2])});break;case 2:b=(0,s.Wc)("".concat(m._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(v[0]),second:"".concat(v[1])});break;default:b=v.join(", ")}var P=y.length>3?(0,s.Wc)(m.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', y.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:b,leftCount:"".concat(y.length-3)}):(0,s.Wc)("".concat(m._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:b}),x=new o.Ry(0),j=g.pin_count,S=g.section_count,w=(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(o.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:h?4:0,children:[(0,u.jsx)(o.xu,{paddingY:h?0:2,children:h?(0,u.jsx)(o.xu,{height:48,overflow:"hidden",width:48,children:(0,u.jsx)(o.zd,{height:"100%",rounding:2,width:"100%",children:(0,u.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:g.image_cover_url||""})})}):(0,u.jsx)(o.xu,{height:60,overflow:"hidden",rounding:4,width:60,children:(0,u.jsx)(d.Z,{boardId:g.id,type:"thumbnail",fullSize:!0})})}),(0,u.jsxs)(o.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,u.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:h?2:4,width:"100%",overflow:h?"hidden":"auto",children:[(0,u.jsx)(o.xv,{size:"400",weight:"bold",lineClamp:h?1:void 0,children:g.name}),_&&(0,u.jsxs)(o.kC,{children:[(0,u.jsx)(o.xv,{inline:!0,children:!!j&&(0,s.nk)(m.ngettext('{{ PinCount }} Pin', '{{ PinCount }} Pins', null != j ? j : 0, 'BoardRow.pinCount', 'Number of Pins on board or section, pinCount: number of Pins'),{PinCount:j})}),!!j&&!!S&&(0,u.jsx)(c.Z,{}),(0,u.jsx)(o.xv,{inline:!0,children:!!S&&(0,s.nk)(m.ngettext('{{ sectionCount }} section', '{{ sectionCount }} sections', null != S ? S : 0, 'BoardRow.sectionCount', 'Number of sections on board, sectionCount: number of sections'),{sectionCount:S})})]})]}),(0,u.jsxs)(o.kC,{alignItems:h?"center":"start",justifyContent:"start",children:["secret"===g.privacy&&(0,u.jsx)(o.xu,{marginStart:h?3:1,children:(0,u.jsx)(o.JO,{color:h?"default":"subtle",icon:"lock",accessibilityLabel:m._('secret board icon', ' - ', ' -- ')})}),g.is_collaborative&&(h||f)&&y.length>0?(0,u.jsx)(o.xu,{zIndex:x,children:(0,u.jsx)(o.HE,{accessibilityLabel:l.U+P,collaborators:y,size:1===y.length?"sm":"xs"})}):g.is_collaborative&&(0,u.jsx)(o.xu,{marginStart:1,children:(0,u.jsx)(o.JO,{icon:"people",accessibilityLabel:m._('group board icon', ' - ', ' -- ')})}),!p&&!!g.section_count&&(0,u.jsx)(o.xu,{"data-test-id":"boardSectionPicker",marginStart:h?3:0,children:(0,u.jsx)(o.JO,{color:h?"default":"subtle",icon:"arrow-forward",accessibilityLabel:m._('board section board picker icon', ' - ', ' -- ')})})]})]})]})});return n&&g.url?(0,u.jsx)(o.Tg,{rounding:2,href:g.url,tapStyle:"compress",children:w}):w}},568674:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(506979),i=n(599689),o=n(908390),a=n(898781),s=n(989726),l=n(130460),c=n(188170),d=n(63552),u=n(515198);function p(e){var t,n,i=e.onSectionSelected,a=e.sectionId,s=e.showSectionRep,l=(0,r.useSelector)(function(e){return e.boardsections[a]}),c=l&&(null===(t=l.preview_pins)||void 0===t?void 0:t[0])&&l.preview_pins[0].image_medium_url;return(0,u.jsx)(d.Z,{rounding:2,onTouch:i,pressState:"none",children:(0,u.jsxs)(o.xu,{"data-test-id":"sectionPickerRow",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:s?4:0,children:[s&&(0,u.jsx)(o.xu,{height:48,width:51,children:(0,u.jsx)(o.zd,{height:"100%",rounding:2,width:"100%",children:(0,u.jsx)(o.Ee,{alt:null!==(n=l.title)&&void 0!==n?n:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!=c?c:""})})}),!s&&(0,u.jsx)(o.xu,{column:1,paddingY:2}),(0,u.jsx)(o.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:s?(0,u.jsx)(o.xu,{overflow:"hidden",width:"100%",marginStart:2,children:(0,u.jsx)(o.xv,{size:"400",lineClamp:1,weight:"bold",children:l.title})}):(0,u.jsx)(o.xu,{marginStart:2,children:(0,u.jsx)(o.xv,{weight:"bold",children:l.title})})})]})})}var f=function(e,t){var n=(0,s.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}).isFetching,i=(0,r.useSelector)(function(t){return(t.feeds["board-sections:".concat(e)]||[]).reduce(function(e,t){if("boardsection"===t.type){var n={type:"boardsection",id:t.id};e.push(n)}return e},[])}),o=(0,r.useSelector)(function(n){return i.map(function(e){return e.id}).reduce(function(r,i){var o=n.boardsections[null!=i?i:""];return i!==t&&o&&r.push({board:{id:e},id:o.id,title:o.title,type:"boardsection",slug:o.slug}),r},[])});return{isFetching:n,boardSections:i,filteredBoardSections:o}};function h(e){var t=e.boardId,n=e.originalBoardId,r=e.sectionId,s=e.repin,d=e.hideBoardPickerRow,h=e.showSectionRep,_=(0,a.ZP)(),m=f(t,r),g=m.isFetching,y=m.boardSections,b=m.filteredBoardSections,v=(0,i.useHistory)(),P=(0,l.gC)()(n||"");return(0,u.jsxs)(o.xu,{children:[y.length>0&&(0,u.jsxs)(o.xu,{paddingY:h?0:3,children:[h&&(0,u.jsx)(o.xu,{paddingY:2,children:(0,u.jsx)(o.xu,{marginBottom:2,children:(0,u.jsx)(o.xv,{children:_._('Board', 'RepinFlow.SectionPickerList.Board', 'Section picker board title')})})}),!d&&(0,u.jsx)(c.Z,{boardId:t,noArrowIcon:!0,onBoardSelected:function(){return s(t,void 0,_)},showSingleBoardRep:h},t),h&&(0,u.jsx)(o.xu,{paddingY:4,children:(0,u.jsx)(o.xv,{children:_._('Section', 'RepinFlow.SectionPickerList.Section', 'Section picker all sections title')})}),b.map(function(e){var r;return(0,u.jsx)(p,{onSectionSelected:function(){if(s(t,e,_),n){var r;v.push(null!==(r=null==P?void 0:P.url)&&void 0!==r?r:"")}},sectionId:null!==(r=e.id)&&void 0!==r?r:"",showSectionRep:h},e.id)})]}),(0,u.jsx)(o.$j,{accessibilityLabel:_._('Loading board section for repin flow', ' - ', ' -- '),show:g})]})}},904202:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return e===t}t.P1=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=0,s=i.pop(),l=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e}))throw Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+t.map(function(e){return n(e)}).join(", ")+"]");return t}(i),c=e.apply(void 0,[function(){return a++,s.apply(void 0,arguments)}].concat(r)),d=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=l.map(function(n){return n.apply(void 0,[e,t].concat(r))});return c.apply(void 0,function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}(o))};return d.resultFunc=s,d.recomputations=function(){return a},d.resetRecomputations=function(){return a=0},d}}(function(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,i=null;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return null!==n&&n.length===o.length&&o.every(function(e,r){return t(e,n[r])})||(i=e.apply(void 0,o)),n=o,i}})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/64109-307e5f7e56e7121f.js.map